# åã€é€²éšæ‡‰ç”¨

## ä¸€ã€Vue.js å‰ç«¯æ¡†æ¶

### (ä¸€) Vue.js åŸºç¤æ¦‚å¿µ

Vue.js æ˜¯ä¸€å€‹ç”¨æ–¼å»ºç«‹ä½¿ç”¨è€…ä»‹é¢çš„æ¼¸é€²å¼ JavaScript æ¡†æ¶ï¼Œç‰¹åˆ¥é©åˆå»ºç«‹å–®é é¢æ‡‰ç”¨ç¨‹å¼ï¼ˆSPAï¼‰ã€‚

#### 1. Vue.js çš„ç‰¹é»
* ğŸš€ **æ¼¸é€²å¼æ¡†æ¶**ï¼šå¯ä»¥é€æ­¥æ¡ç”¨ï¼Œä¸éœ€è¦å®Œå…¨é‡å¯«ç¾æœ‰å°ˆæ¡ˆ
* ğŸ“¦ **çµ„ä»¶åŒ–é–‹ç™¼**ï¼šå°‡ UI åˆ†è§£ç‚ºå¯é‡è¤‡ä½¿ç”¨çš„çµ„ä»¶
* ğŸ¯ **éŸ¿æ‡‰å¼æ•¸æ“š**ï¼šè‡ªå‹•æ›´æ–°è¦–åœ–ç•¶æ•¸æ“šæ”¹è®Šæ™‚
* ğŸ› ï¸ **æ˜“å­¸æ˜“ç”¨**ï¼šèªæ³•ç°¡æ½”ï¼Œå­¸ç¿’æ›²ç·šå¹³ç·©
* ğŸ”§ **å·¥å…·ç”Ÿæ…‹**ï¼šè±å¯Œçš„å®˜æ–¹å’Œç¬¬ä¸‰æ–¹å·¥å…·æ”¯æ´

#### 2. Vue å¯¦ä¾‹èˆ‡æ‡‰ç”¨

| æ¦‚å¿µ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| Vue æ‡‰ç”¨ | æ•´å€‹æ‡‰ç”¨çš„æ ¹å¯¦ä¾‹ | `createApp()` |
| çµ„ä»¶ | å¯é‡è¤‡ä½¿ç”¨çš„ UI å–®å…ƒ | `defineComponent()` |
| æ¨¡æ¿ | è²æ˜å¼çš„ HTML èªæ³• | `<template>` |
| éŸ¿æ‡‰å¼æ•¸æ“š | è‡ªå‹•è¿½è¹¤çš„æ•¸æ“š | `ref()`, `reactive()` |

```javascript
// Vue å¯¦ä¾‹åŸºæœ¬çµæ§‹
import { createApp } from 'vue'

const app = createApp({
  data() {
    return {
      message: 'Hello Vue!',
      count: 0,
      isVisible: true
    }
  },
  methods: {
    increment() {
      this.count++
    },
    toggleVisibility() {
      this.isVisible = !this.isVisible
    }
  },
  computed: {
    doubleCount() {
      return this.count * 2
    }
  }
})

app.mount('#app')
```

#### 3. Vue ç”Ÿå‘½é€±æœŸ

| éšæ®µ | é‰¤å­å‡½æ•¸ | èªªæ˜ |
|------|----------|------|
| å‰µå»º | `beforeCreate`, `created` | çµ„ä»¶å¯¦ä¾‹å‰µå»ºå‰å¾Œ |
| æ›è¼‰ | `beforeMount`, `mounted` | DOM æ›è¼‰å‰å¾Œ |
| æ›´æ–° | `beforeUpdate`, `updated` | æ•¸æ“šæ›´æ–°å‰å¾Œ |
| éŠ·æ¯€ | `beforeUnmount`, `unmounted` | çµ„ä»¶éŠ·æ¯€å‰å¾Œ |

### (äºŒ) çµ„ä»¶é–‹ç™¼

çµ„ä»¶æ˜¯ Vue.js æœ€å¼·å¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒè®“æˆ‘å€‘å¯ä»¥å°‡ UI åˆ†å‰²æˆç¨ç«‹ã€å¯é‡è¤‡ä½¿ç”¨çš„éƒ¨åˆ†ã€‚

#### 1. å–®æ–‡ä»¶çµ„ä»¶çµæ§‹

| éƒ¨åˆ† | ä½œç”¨ | èªªæ˜ |
|------|------|------|
| `<template>` | æ¨¡æ¿ | å®šç¾©çµ„ä»¶çš„ HTML çµæ§‹ |
| `<script>` | é‚è¼¯ | å®šç¾©çµ„ä»¶çš„æ•¸æ“šå’Œæ–¹æ³• |
| `<style>` | æ¨£å¼ | å®šç¾©çµ„ä»¶çš„ CSS æ¨£å¼ |

#### 2. çµ„ä»¶é€šä¿¡æ–¹å¼

| æ–¹å¼ | ç”¨é€” | ç¯„ä¾‹ |
|------|------|------|
| Props | çˆ¶å‚³å­ | `:title="parentTitle"` |
| Emit | å­å‚³çˆ¶ | `$emit('update')` |
| Slots | å…§å®¹åˆ†ç™¼ | `<slot name="header">` |
| Provide/Inject | è·¨å±¤ç´š | `provide('key', value)` |

```vue
<!-- å–®æ–‡ä»¶çµ„ä»¶å®Œæ•´ç¯„ä¾‹ -->
<template>
  <div class="user-card">
    <img :src="user.avatar" :alt="user.name" class="avatar">
    <div class="user-info">
      <h3>{{ user.name }}</h3>
      <p>{{ user.email }}</p>
      <span :class="statusClass">{{ user.status }}</span>
    </div>
    <div class="actions">
      <button @click="editUser" class="btn-edit">ç·¨è¼¯</button>
      <button @click="deleteUser" class="btn-delete">åˆªé™¤</button>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue'

// Props å®šç¾©
const props = defineProps({
  user: {
    type: Object,
    required: true,
    validator(value) {
      return value.name && value.email
    }
  }
})

// Events å®šç¾©
const emit = defineEmits(['edit', 'delete'])

// è¨ˆç®—å±¬æ€§
const statusClass = computed(() => {
  return {
    'status-active': props.user.status === 'active',
    'status-inactive': props.user.status === 'inactive'
  }
})

// æ–¹æ³•
const editUser = () => {
  emit('edit', props.user.id)
}

const deleteUser = () => {
  emit('delete', props.user.id)
}
</script>

<style scoped>
.user-card {
  display: flex;
  align-items: center;
  padding: 1rem;
  border: 1px solid #e1e5e9;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  margin-right: 1rem;
}

.user-info {
  flex: 1;
}

.status-active {
  color: #28a745;
}

.status-inactive {
  color: #6c757d;
}
</style>
```

### (ä¸‰) æ•¸æ“šç¶å®šèˆ‡äº‹ä»¶è™•ç†

Vue.js æä¾›äº†å¼·å¤§çš„æ•¸æ“šç¶å®šå’Œäº‹ä»¶è™•ç†æ©Ÿåˆ¶ï¼Œè®“é–‹ç™¼è€…èƒ½å¤ è¼•é¬†å‰µå»ºäº’å‹•å¼çš„ä½¿ç”¨è€…ä»‹é¢ã€‚

#### 1. æ•¸æ“šç¶å®šé¡å‹

| ç¶å®šé¡å‹ | èªæ³• | èªªæ˜ |
|----------|------|------|
| æ’å€¼ç¶å®š | `{{ message }}` | æ–‡æœ¬æ’å€¼ |
| å±¬æ€§ç¶å®š | `:href="url"` | å‹•æ…‹å±¬æ€§ |
| é›™å‘ç¶å®š | `v-model="value"` | è¡¨å–®å…ƒç´ é›™å‘åŒæ­¥ |
| äº‹ä»¶ç¶å®š | `@click="handler"` | äº‹ä»¶ç›£è½ |

#### 2. æŒ‡ä»¤ç³»çµ±

| æŒ‡ä»¤ | ä½œç”¨ | ç¯„ä¾‹ |
|------|------|------|
| `v-if` | æ¢ä»¶æ¸²æŸ“ | `v-if="isVisible"` |
| `v-for` | åˆ—è¡¨æ¸²æŸ“ | `v-for="item in items"` |
| `v-show` | é¡¯ç¤º/éš±è— | `v-show="isDisplay"` |
| `v-bind` | å±¬æ€§ç¶å®š | `v-bind:class="className"` |
| `v-on` | äº‹ä»¶ç›£è½ | `v-on:click="handleClick"` |

#### 3. ä¿®é£¾ç¬¦

| é¡å‹ | ä¿®é£¾ç¬¦ | èªªæ˜ |
|------|--------|------|
| äº‹ä»¶ä¿®é£¾ç¬¦ | `.stop`, `.prevent` | é˜»æ­¢äº‹ä»¶å†’æ³¡ã€é è¨­è¡Œç‚º |
| æŒ‰éµä¿®é£¾ç¬¦ | `.enter`, `.tab` | ç‰¹å®šæŒ‰éµè§¸ç™¼ |
| è¡¨å–®ä¿®é£¾ç¬¦ | `.lazy`, `.number` | å»¶é²åŒæ­¥ã€è½‰æ›é¡å‹ |

```vue
<template>
  <div class="data-binding-demo">
    <!-- æ–‡æœ¬æ’å€¼ -->
    <h1>{{ title }}</h1>
    <p>ç•¶å‰è¨ˆæ•¸ï¼š{{ count }}</p>
    
    <!-- å±¬æ€§ç¶å®š -->
    <img :src="imageUrl" :alt="imageAlt">
    <a :href="linkUrl" target="_blank">å¤–éƒ¨é€£çµ</a>
    
    <!-- é¡åˆ¥ç¶å®š -->
    <div :class="{ active: isActive, 'text-danger': hasError }">
      å‹•æ…‹é¡åˆ¥
    </div>
    <div :class="[classA, { classB: isB }]">
      é™£åˆ—èªæ³•
    </div>
    
    <!-- æ¨£å¼ç¶å®š -->
    <div :style="{ color: textColor, fontSize: fontSize + 'px' }">
      å‹•æ…‹æ¨£å¼
    </div>
    
    <!-- è¡¨å–®é›™å‘ç¶å®š -->
    <div class="form-section">
      <input v-model="message" placeholder="è¼¸å…¥è¨Šæ¯">
      <p>ä½ è¼¸å…¥çš„æ˜¯ï¼š{{ message }}</p>
      
      <input v-model.number="age" type="number" placeholder="å¹´é½¡">
      <input v-model.lazy="description" placeholder="æè¿°ï¼ˆå¤±ç„¦æ™‚æ›´æ–°ï¼‰">
    </div>
    
    <!-- äº‹ä»¶è™•ç† -->
    <div class="event-section">
      <button @click="increment">é»æ“Šå¢åŠ </button>
      <button @click="decrement">é»æ“Šæ¸›å°‘</button>
      <button @click.stop="handleStop">é˜»æ­¢å†’æ³¡</button>
      <input @keyup.enter="submitForm" placeholder="æŒ‰ Enter æäº¤">
    </div>
    
    <!-- æ¢ä»¶æ¸²æŸ“ -->
    <div v-if="showContent">
      <p>é€™æ˜¯æ¢ä»¶é¡¯ç¤ºçš„å…§å®¹</p>
    </div>
    <div v-else>
      <p>æ›¿ä»£å…§å®¹</p>
    </div>
    
    <!-- åˆ—è¡¨æ¸²æŸ“ -->
    <ul>
      <li v-for="(item, index) in items" :key="item.id">
        {{ index + 1 }}. {{ item.name }} - {{ item.status }}
        <button @click="removeItem(index)">åˆªé™¤</button>
      </li>
    </ul>
    
    <!-- å‹•æ…‹çµ„ä»¶ -->
    <component :is="currentComponent" :data="componentData"></component>
  </div>
</template>

<script setup>
import { ref, reactive, computed, watch } from 'vue'

// éŸ¿æ‡‰å¼æ•¸æ“š
const title = ref('æ•¸æ“šç¶å®šç¤ºä¾‹')
const count = ref(0)
const message = ref('')
const age = ref(0)
const description = ref('')
const imageUrl = ref('https://via.placeholder.com/150')
const imageAlt = ref('ç¤ºä¾‹åœ–ç‰‡')
const linkUrl = ref('https://vuejs.org')
const isActive = ref(false)
const hasError = ref(false)
const classA = ref('class-a')
const isB = ref(true)
const textColor = ref('#42b883')
const fontSize = ref(16)
const showContent = ref(true)
const currentComponent = ref('ComponentA')
const componentData = ref({ message: 'Hello' })

const items = reactive([
  { id: 1, name: 'é …ç›® 1', status: 'å®Œæˆ' },
  { id: 2, name: 'é …ç›® 2', status: 'é€²è¡Œä¸­' },
  { id: 3, name: 'é …ç›® 3', status: 'å¾…é–‹å§‹' }
])

// æ–¹æ³•
const increment = () => {
  count.value++
  isActive.value = count.value > 5
}

const decrement = () => {
  count.value--
  hasError.value = count.value < 0
}

const handleStop = () => {
  console.log('é˜»æ­¢äº†äº‹ä»¶å†’æ³¡')
}

const submitForm = () => {
  console.log('è¡¨å–®æäº¤ï¼š', message.value)
}

const removeItem = (index) => {
  items.splice(index, 1)
}

// ç›£è½å™¨
watch(count, (newVal, oldVal) => {
  console.log(`è¨ˆæ•¸å¾ ${oldVal} è®Šç‚º ${newVal}`)
})
</script>
```

### (å››) Composition API

Composition API æ˜¯ Vue 3 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œæä¾›äº†æ›´éˆæ´»çš„é‚è¼¯çµ„ç¹”æ–¹å¼ï¼Œç‰¹åˆ¥é©åˆè¤‡é›œçµ„ä»¶çš„é–‹ç™¼ã€‚

#### 1. Composition API èˆ‡ Options API æ¯”è¼ƒ

| ç‰¹æ€§ | Options API | Composition API |
|------|-------------|-----------------|
| é‚è¼¯çµ„ç¹” | æŒ‰é¸é …åˆ†çµ„ | æŒ‰åŠŸèƒ½åˆ†çµ„ |
| ç¨‹å¼ç¢¼é‡ç”¨ | Mixins | Composables |
| TypeScript æ”¯æ´ | æœ‰é™ | å®Œæ•´ |
| å­¸ç¿’æ›²ç·š | è¼ƒå¹³ç·© | è¼ƒé™¡å³­ |
| é©ç”¨å ´æ™¯ | ç°¡å–®çµ„ä»¶ | è¤‡é›œé‚è¼¯ |

#### 2. æ ¸å¿ƒéŸ¿æ‡‰å¼ API

| API | ç”¨é€” | ç¯„ä¾‹ |
|-----|------|------|
| `ref()` | åŸºæœ¬é¡å‹éŸ¿æ‡‰å¼ | `const count = ref(0)` |
| `reactive()` | ç‰©ä»¶éŸ¿æ‡‰å¼ | `const state = reactive({})` |
| `computed()` | è¨ˆç®—å±¬æ€§ | `const double = computed(() => count.value * 2)` |
| `watch()` | ç›£è½å™¨ | `watch(count, (newVal) => {})` |

#### 3. ç”Ÿå‘½é€±æœŸé‰¤å­

| Options API | Composition API | èªªæ˜ |
|-------------|-----------------|------|
| `beforeCreate` | - | ä¸éœ€è¦ï¼ˆsetup å³ç›¸ç•¶æ–¼ï¼‰ |
| `created` | - | ä¸éœ€è¦ï¼ˆsetup å³ç›¸ç•¶æ–¼ï¼‰ |
| `beforeMount` | `onBeforeMount` | æ›è¼‰å‰ |
| `mounted` | `onMounted` | æ›è¼‰å¾Œ |
| `beforeUpdate` | `onBeforeUpdate` | æ›´æ–°å‰ |
| `updated` | `onUpdated` | æ›´æ–°å¾Œ |

```javascript
// Composition API å®Œæ•´ç¯„ä¾‹ (ä½¿ç”¨ script setup)
<script setup>
import { 
  ref, 
  reactive, 
  computed, 
  watch, 
  onMounted, 
  onUnmounted,
  nextTick 
} from 'vue'

// 1. éŸ¿æ‡‰å¼æ•¸æ“š
const count = ref(0)
const message = ref('Hello')
const user = reactive({
  name: 'John',
  age: 25,
  email: 'john@example.com'
})

// 2. è¨ˆç®—å±¬æ€§
const doubleCount = computed(() => count.value * 2)
const fullInfo = computed(() => 
  `${user.name} (${user.age}) - ${user.email}`
)

// 3. æ–¹æ³•
const increment = () => {
  count.value++
}

const decrement = () => {
  if (count.value > 0) {
    count.value--
  }
}

const updateUser = (newData) => {
  Object.assign(user, newData)
}

// 4. ç›£è½å™¨
watch(count, (newCount, oldCount) => {
  console.log(`Count changed from ${oldCount} to ${newCount}`)
  if (newCount > 10) {
    message.value = 'Count is getting high!'
  }
})

// å¤šå€‹å€¼ç›£è½
watch([count, message], ([newCount, newMessage]) => {
  console.log(`Count: ${newCount}, Message: ${newMessage}`)
})

// æ·±åº¦ç›£è½ç‰©ä»¶
watch(
  () => user,
  (newUser) => {
    console.log('User updated:', newUser)
  },
  { deep: true }
)

// 5. ç”Ÿå‘½é€±æœŸé‰¤å­
onMounted(() => {
  console.log('Component mounted')
  // åˆå§‹åŒ–æ•¸æ“š
  loadInitialData()
})

onUnmounted(() => {
  console.log('Component unmounted')
  // æ¸…ç†å·¥ä½œ
  cleanup()
})

// 6. å‰¯ä½œç”¨å‡½æ•¸
const loadInitialData = async () => {
  try {
    // æ¨¡æ“¬ API èª¿ç”¨
    await new Promise(resolve => setTimeout(resolve, 1000))
    user.name = 'Loaded User'
    count.value = 5
  } catch (error) {
    console.error('Failed to load data:', error)
  }
}

const cleanup = () => {
  // æ¸…ç†å®šæ™‚å™¨ã€äº‹ä»¶ç›£è½å™¨ç­‰
  if (timer.value) {
    clearInterval(timer.value)
  }
}

// 7. å®šæ™‚å™¨ç¯„ä¾‹
const timer = ref(null)
const startTimer = () => {
  timer.value = setInterval(() => {
    increment()
  }, 1000)
}

const stopTimer = () => {
  if (timer.value) {
    clearInterval(timer.value)
    timer.value = null
  }
}
</script>
```

#### 4. è‡ªå®šç¾© Composables

Composables æ˜¯ Composition API çš„ç²¾é«“ï¼Œç”¨æ–¼å°è£å’Œé‡ç”¨æœ‰ç‹€æ…‹çš„é‚è¼¯ã€‚

:::spoiler Composables ç¯„ä¾‹
```javascript
// useCounter.js - è‡ªå®šç¾©è¨ˆæ•¸å™¨ composable
import { ref, computed } from 'vue'

export function useCounter(initialValue = 0) {
  const count = ref(initialValue)
  
  const increment = () => count.value++
  const decrement = () => count.value--
  const reset = () => count.value = initialValue
  
  const isEven = computed(() => count.value % 2 === 0)
  const isPositive = computed(() => count.value > 0)
  
  return {
    count,
    increment,
    decrement,
    reset,
    isEven,
    isPositive
  }
}

// useFetch.js - è³‡æ–™ç²å– composable
import { ref, isRef, unref, watchEffect } from 'vue'

export function useFetch(url) {
  const data = ref(null)
  const error = ref(null)
  const loading = ref(false)

  const doFetch = async () => {
    loading.value = true
    error.value = null
    
    try {
      const response = await fetch(unref(url))
      data.value = await response.json()
    } catch (err) {
      error.value = err
    } finally {
      loading.value = false
    }
  }

  if (isRef(url)) {
    watchEffect(doFetch)
  } else {
    doFetch()
  }

  return { data, error, loading, refresh: doFetch }
}

// åœ¨çµ„ä»¶ä¸­ä½¿ç”¨ (script setup èªæ³•)
<script setup>
const { count, increment, isEven } = useCounter(10)
const { data, loading, error } = useFetch('/api/users')

// ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦ return
</script>
```
:::

#### 5. Composition API æœ€ä½³å¯¦è¸

| å¯¦è¸ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| ğŸ¯ **é‚è¼¯åˆ†çµ„** | ç›¸é—œé‚è¼¯æ”¾åœ¨ä¸€èµ· | å°‡è¨ˆæ•¸å™¨é‚è¼¯å–®ç¨å°è£ |
| ğŸ”„ **Composables é‡ç”¨** | æå–å¯é‡ç”¨é‚è¼¯ | `useCounter`, `useFetch` |
| ğŸ“ **æ˜ç¢ºè¿”å›** | æ¸…æ¥šè¿”å›éœ€è¦çš„æ•¸æ“š | åªè¿”å›æ¨¡æ¿éœ€è¦çš„å…§å®¹ |
| âš ï¸ **éŸ¿æ‡‰å¼é™·é˜±** | æ³¨æ„ `.value` èªæ³• | `ref` éœ€è¦ `.value` |

## äºŒã€Flask å¾Œç«¯æ¡†æ¶

### (ä¸€) Flask åŸºç¤æ¦‚å¿µ

Flask æ˜¯ä¸€å€‹è¼•é‡ç´šçš„ Python Web æ¡†æ¶ï¼Œä»¥å…¶ç°¡æ½”æ€§å’Œéˆæ´»æ€§è€Œèåï¼Œç‰¹åˆ¥é©åˆå¿«é€Ÿé–‹ç™¼ Web æ‡‰ç”¨ç¨‹å¼å’Œ APIã€‚

#### 1. Flask çš„ç‰¹é»
* ğŸš€ **å¾®æ¡†æ¶**ï¼šæ ¸å¿ƒç°¡æ½”ï¼Œå¯æ ¹æ“šéœ€æ±‚æ“´å±•
* ğŸ¯ **éˆæ´»æ€§**ï¼šä¸å¼·åˆ¶ç‰¹å®šçš„ç›®éŒ„çµæ§‹æˆ–çµ„ä»¶
* ğŸ› ï¸ **è±å¯Œæ“´å±•**ï¼šå¤§é‡ç¬¬ä¸‰æ–¹æ“´å±•å¯é¸æ“‡
* ğŸ“š **æ˜“å­¸ç¿’**ï¼šèªæ³•ç°¡å–®ï¼Œæ–‡æª”å®Œæ•´
* ğŸ”§ **é«˜è‡ªå®šç¾©**ï¼šå¯å®Œå…¨æ§åˆ¶æ‡‰ç”¨æ¶æ§‹

#### 2. Flask æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| æ‡‰ç”¨å¯¦ä¾‹ | Flask æ‡‰ç”¨çš„æ ¸å¿ƒå°è±¡ | `app = Flask(__name__)` |
| è·¯ç”± | URL èˆ‡è¦–åœ–å‡½æ•¸çš„æ˜ å°„ | `@app.route('/')` |
| è¦–åœ–å‡½æ•¸ | è™•ç†è«‹æ±‚çš„å‡½æ•¸ | `def index()` |
| è«‹æ±‚ä¸Šä¸‹æ–‡ | ç•¶å‰è«‹æ±‚çš„ç›¸é—œä¿¡æ¯ | `request.method` |
| æ‡‰ç”¨ä¸Šä¸‹æ–‡ | æ‡‰ç”¨ç´šåˆ¥çš„ä¿¡æ¯ | `current_app` |

#### 3. HTTP æ–¹æ³•æ”¯æ´

| æ–¹æ³• | ç”¨é€” | Flask èªæ³• |
|------|------|-----------|
| GET | ç²å–è³‡æº | `methods=['GET']` |
| POST | å‰µå»ºè³‡æº | `methods=['POST']` |
| PUT | æ›´æ–°è³‡æº | `methods=['PUT']` |
| DELETE | åˆªé™¤è³‡æº | `methods=['DELETE']` |
| PATCH | éƒ¨åˆ†æ›´æ–° | `methods=['PATCH']` |

### (äºŒ) åŸºæœ¬è·¯ç”±èˆ‡è¦–åœ–

è·¯ç”±æ˜¯ Flask æ‡‰ç”¨çš„æ ¸å¿ƒï¼Œå®ƒå®šç¾©äº† URL èˆ‡è™•ç†å‡½æ•¸ä¹‹é–“çš„å°æ‡‰é—œä¿‚ã€‚

#### 1. è·¯ç”±è£é£¾å™¨

| è£é£¾å™¨åƒæ•¸ | èªªæ˜ | ç¯„ä¾‹ |
|------------|------|------|
| `rule` | URL è¦å‰‡ | `'/users/<int:id>'` |
| `methods` | å…è¨±çš„ HTTP æ–¹æ³• | `['GET', 'POST']` |
| `defaults` | é è¨­åƒæ•¸å€¼ | `{'page': 1}` |
| `endpoint` | ç«¯é»åç¨± | `'user_profile'` |

#### 2. URL è®Šæ•¸é¡å‹

| é¡å‹ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `string` | å­—ä¸²ï¼ˆé è¨­ï¼‰ | `<username>` |
| `int` | æ•´æ•¸ | `<int:user_id>` |
| `float` | æµ®é»æ•¸ | `<float:price>` |
| `path` | è·¯å¾‘ï¼ˆåŒ…å«æ–œç·šï¼‰ | `<path:subpath>` |
| `uuid` | UUID | `<uuid:token>` |

```python
from flask import Flask, jsonify, request, abort
import logging

app = Flask(__name__)

# é…ç½®æ—¥èªŒ
logging.basicConfig(level=logging.INFO)
logger = app.logger

# åŸºæœ¬è·¯ç”±
@app.route('/')
def hello_world():
    """é¦–é """
    return {
        'message': 'Hello, World!',
        'version': '1.0.0',
        'status': 'running'
    }

# å¸¶åƒæ•¸çš„è·¯ç”±
@app.route('/users/<int:user_id>')
def get_user(user_id):
    """ç²å–ç‰¹å®šç”¨æˆ¶ä¿¡æ¯"""
    # æ¨¡æ“¬ç”¨æˆ¶æ•¸æ“š
    users = {
        1: {'name': 'Alice', 'email': 'alice@example.com'},
        2: {'name': 'Bob', 'email': 'bob@example.com'}
    }
    
    if user_id not in users:
        abort(404)
    
    return jsonify({
        'user_id': user_id,
        'user': users[user_id]
    })

# å¤šç¨® HTTP æ–¹æ³•
@app.route('/api/data', methods=['GET', 'POST'])
def handle_data():
    """è™•ç†æ•¸æ“šçš„ç²å–å’Œå‰µå»º"""
    if request.method == 'GET':
        # ç²å–æ•¸æ“š
        page = request.args.get('page', 1, type=int)
        limit = request.args.get('limit', 10, type=int)
        
        return jsonify({
            'data': f'Page {page} data',
            'pagination': {
                'page': page,
                'limit': limit,
                'total': 100
            }
        })
    
    elif request.method == 'POST':
        # å‰µå»ºæ•¸æ“š
        if not request.is_json:
            return jsonify({'error': 'Content-Type must be application/json'}), 400
        
        data = request.get_json()
        
        # ç°¡å–®é©—è­‰
        if not data or 'name' not in data:
            return jsonify({'error': 'Name is required'}), 400
        
        # æ¨¡æ“¬ä¿å­˜æ•¸æ“š
        new_item = {
            'id': 123,
            'name': data['name'],
            'description': data.get('description', ''),
            'created_at': '2024-01-01T00:00:00Z'
        }
        
        logger.info(f"Created new item: {new_item}")
        return jsonify(new_item), 201

# æŸ¥è©¢åƒæ•¸è™•ç†
@app.route('/search')
def search():
    """æœç´¢åŠŸèƒ½"""
    query = request.args.get('q', '')
    category = request.args.get('category', 'all')
    sort_by = request.args.get('sort', 'date')
    
    if not query:
        return jsonify({'error': 'Query parameter q is required'}), 400
    
    # æ¨¡æ“¬æœç´¢çµæœ
    results = [
        {'id': 1, 'title': f'Result 1 for {query}', 'category': category},
        {'id': 2, 'title': f'Result 2 for {query}', 'category': category}
    ]
    
    return jsonify({
        'query': query,
        'category': category,
        'sort_by': sort_by,
        'results': results,
        'total': len(results)
    })

# è·¯å¾‘åƒæ•¸
@app.route('/files/<path:filename>')
def serve_file(filename):
    """æä¾›æ–‡ä»¶æœå‹™"""
    # å®‰å…¨æª¢æŸ¥
    if '..' in filename or filename.startswith('/'):
        abort(400)
    
    return jsonify({
        'filename': filename,
        'message': f'Serving file: {filename}'
    })

# å¯é¸åƒæ•¸
@app.route('/blog')
@app.route('/blog/<int:page>')
def blog(page=1):
    """éƒ¨è½æ ¼æ–‡ç« åˆ—è¡¨"""
    posts_per_page = 5
    
    # æ¨¡æ“¬æ–‡ç« æ•¸æ“š
    all_posts = [f'Post {i}' for i in range(1, 51)]
    start = (page - 1) * posts_per_page
    end = start + posts_per_page
    posts = all_posts[start:end]
    
    return jsonify({
        'page': page,
        'posts': posts,
        'has_next': end < len(all_posts),
        'has_prev': page > 1,
        'total_pages': (len(all_posts) + posts_per_page - 1) // posts_per_page
    })

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=5000)
```

### (ä¸‰) è³‡æ–™åº«æ•´åˆ

Flask èˆ‡è³‡æ–™åº«çš„æ•´åˆæ˜¯å»ºç«‹å‹•æ…‹ Web æ‡‰ç”¨çš„é‡è¦éƒ¨åˆ†ï¼ŒFlask-SQLAlchemy æ˜¯æœ€å¸¸ç”¨çš„ ORM æ“´å±•ã€‚

#### 1. SQLAlchemy æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| Model | æ•¸æ“šæ¨¡å‹é¡ | `class User(db.Model)` |
| Session | æ•¸æ“šåº«æœƒè©± | `db.session` |
| Query | æŸ¥è©¢å°è±¡ | `User.query.filter_by()` |
| Migration | æ•¸æ“šåº«é·ç§» | Flask-Migrate |

#### 2. å¸¸ç”¨æ•¸æ“šé¡å‹

| SQLAlchemy é¡å‹ | Python é¡å‹ | èªªæ˜ |
|------------------|-------------|------|
| `Integer` | `int` | æ•´æ•¸ |
| `String(size)` | `str` | å­—ä¸² |
| `Text` | `str` | é•·æ–‡æœ¬ |
| `DateTime` | `datetime` | æ—¥æœŸæ™‚é–“ |
| `Boolean` | `bool` | å¸ƒæ—å€¼ |
| `Float` | `float` | æµ®é»æ•¸ |

#### 3. é—œä¿‚é¡å‹

| é—œä¿‚ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| ä¸€å°å¤š | ä¸€å€‹ç”¨æˆ¶å¤šç¯‡æ–‡ç«  | `User -> Posts` |
| å¤šå°ä¸€ | å¤šç¯‡æ–‡ç« å±¬æ–¼ä¸€å€‹ç”¨æˆ¶ | `Posts -> User` |
| ä¸€å°ä¸€ | ç”¨æˆ¶èˆ‡å€‹äººè³‡æ–™ | `User -> Profile` |
| å¤šå°å¤š | ç”¨æˆ¶èˆ‡è§’è‰² | `User <-> Role` |

```python
from flask import Flask, jsonify, request, abort
from flask_sqlalchemy import SQLAlchemy
from datetime import datetime
import os

app = Flask(__name__)

# æ•¸æ“šåº«é…ç½®
basedir = os.path.abspath(os.path.dirname(__file__))
app.config['SQLALCHEMY_DATABASE_URI'] = f"sqlite:///{os.path.join(basedir, 'app.db')}"
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
app.config['SECRET_KEY'] = 'your-secret-key-here'

# åˆå§‹åŒ–æ•¸æ“šåº«
db = SQLAlchemy(app)

# ç”¨æˆ¶æ¨¡å‹
class User(db.Model):
    """ç”¨æˆ¶æ¨¡å‹"""
    __tablename__ = 'users'
    
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False, index=True)
    email = db.Column(db.String(120), unique=True, nullable=False, index=True)
    password_hash = db.Column(db.String(128))
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    is_active = db.Column(db.Boolean, default=True)
    
    # é—œä¿‚ï¼šä¸€å€‹ç”¨æˆ¶å¯ä»¥æœ‰å¤šç¯‡æ–‡ç« 
    posts = db.relationship('Post', backref='author', lazy='dynamic', cascade='all, delete-orphan')
    
    def __repr__(self):
        return f'<User {self.username}>'
    
    def to_dict(self):
        """è½‰æ›ç‚ºå­—å…¸æ ¼å¼"""
        return {
            'id': self.id,
            'username': self.username,
            'email': self.email,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'is_active': self.is_active,
            'posts_count': self.posts.count()
        }

# æ–‡ç« æ¨¡å‹
class Post(db.Model):
    """æ–‡ç« æ¨¡å‹"""
    __tablename__ = 'posts'
    
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(200), nullable=False)
    content = db.Column(db.Text)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    published = db.Column(db.Boolean, default=False)
    
    # å¤–éµï¼šé—œè¯åˆ°ç”¨æˆ¶
    user_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    
    def __repr__(self):
        return f'<Post {self.title}>'
    
    def to_dict(self):
        """è½‰æ›ç‚ºå­—å…¸æ ¼å¼"""
        return {
            'id': self.id,
            'title': self.title,
            'content': self.content,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'published': self.published,
            'author': self.author.username if self.author else None
        }

# æ¨™ç±¤æ¨¡å‹ï¼ˆå¤šå°å¤šé—œä¿‚ç¤ºä¾‹ï¼‰
post_tags = db.Table('post_tags',
    db.Column('post_id', db.Integer, db.ForeignKey('posts.id'), primary_key=True),
    db.Column('tag_id', db.Integer, db.ForeignKey('tags.id'), primary_key=True)
)

class Tag(db.Model):
    """æ¨™ç±¤æ¨¡å‹"""
    __tablename__ = 'tags'
    
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50), unique=True, nullable=False)
    
    # å¤šå°å¤šé—œä¿‚
    posts = db.relationship('Post', secondary=post_tags, lazy='subquery',
                           backref=db.backref('tags', lazy=True))

# æ•¸æ“šåº«æ“ä½œè·¯ç”±
@app.route('/users', methods=['GET', 'POST'])
def handle_users():
    """è™•ç†ç”¨æˆ¶çš„ç²å–å’Œå‰µå»º"""
    if request.method == 'GET':
        # ç²å–ç”¨æˆ¶åˆ—è¡¨
        page = request.args.get('page', 1, type=int)
        per_page = request.args.get('per_page', 10, type=int)
        
        users = User.query.paginate(
            page=page, 
            per_page=per_page, 
            error_out=False
        )
        
        return jsonify({
            'users': [user.to_dict() for user in users.items],
            'pagination': {
                'page': page,
                'pages': users.pages,
                'per_page': per_page,
                'total': users.total,
                'has_next': users.has_next,
                'has_prev': users.has_prev
            }
        })
    
    elif request.method == 'POST':
        # å‰µå»ºæ–°ç”¨æˆ¶
        data = request.get_json()
        
        if not data:
            return jsonify({'error': 'No data provided'}), 400
        
        # é©—è­‰å¿…å¡«å­—æ®µ
        required_fields = ['username', 'email']
        missing_fields = [field for field in required_fields if field not in data]
        if missing_fields:
            return jsonify({'error': f'Missing fields: {missing_fields}'}), 400
        
        # æª¢æŸ¥ç”¨æˆ¶åå’Œéƒµç®±æ˜¯å¦å·²å­˜åœ¨
        if User.query.filter_by(username=data['username']).first():
            return jsonify({'error': 'Username already exists'}), 409
        
        if User.query.filter_by(email=data['email']).first():
            return jsonify({'error': 'Email already exists'}), 409
        
        # å‰µå»ºæ–°ç”¨æˆ¶
        new_user = User(
            username=data['username'],
            email=data['email']
        )
        
        try:
            db.session.add(new_user)
            db.session.commit()
            return jsonify(new_user.to_dict()), 201
        except Exception as e:
            db.session.rollback()
            return jsonify({'error': 'Failed to create user'}), 500

@app.route('/users/<int:user_id>', methods=['GET', 'PUT', 'DELETE'])
def handle_user(user_id):
    """è™•ç†å–®å€‹ç”¨æˆ¶çš„æ“ä½œ"""
    user = User.query.get_or_404(user_id)
    
    if request.method == 'GET':
        # ç²å–ç”¨æˆ¶è©³æƒ…
        user_data = user.to_dict()
        user_data['posts'] = [post.to_dict() for post in user.posts]
        return jsonify(user_data)
    
    elif request.method == 'PUT':
        # æ›´æ–°ç”¨æˆ¶
        data = request.get_json()
        
        if 'username' in data:
            # æª¢æŸ¥ç”¨æˆ¶åæ˜¯å¦è¢«å…¶ä»–ç”¨æˆ¶ä½¿ç”¨
            existing_user = User.query.filter_by(username=data['username']).first()
            if existing_user and existing_user.id != user_id:
                return jsonify({'error': 'Username already exists'}), 409
            user.username = data['username']
        
        if 'email' in data:
            # æª¢æŸ¥éƒµç®±æ˜¯å¦è¢«å…¶ä»–ç”¨æˆ¶ä½¿ç”¨
            existing_user = User.query.filter_by(email=data['email']).first()
            if existing_user and existing_user.id != user_id:
                return jsonify({'error': 'Email already exists'}), 409
            user.email = data['email']
        
        if 'is_active' in data:
            user.is_active = data['is_active']
        
        try:
            db.session.commit()
            return jsonify(user.to_dict())
        except Exception as e:
            db.session.rollback()
            return jsonify({'error': 'Failed to update user'}), 500
    
    elif request.method == 'DELETE':
        # åˆªé™¤ç”¨æˆ¶
        try:
            db.session.delete(user)
            db.session.commit()
            return jsonify({'message': 'User deleted successfully'})
        except Exception as e:
            db.session.rollback()
            return jsonify({'error': 'Failed to delete user'}), 500

# æŸ¥è©¢ç¯„ä¾‹
@app.route('/users/search')
def search_users():
    """æœç´¢ç”¨æˆ¶"""
    query = request.args.get('q', '')
    
    if not query:
        return jsonify({'error': 'Query parameter q is required'}), 400
    
    # ä½¿ç”¨ OR æ¢ä»¶æœç´¢ç”¨æˆ¶åå’Œéƒµç®±
    users = User.query.filter(
        db.or_(
            User.username.ilike(f'%{query}%'),
            User.email.ilike(f'%{query}%')
        )
    ).all()
    
    return jsonify({
        'query': query,
        'results': [user.to_dict() for user in users],
        'total': len(users)
    })

# åˆå§‹åŒ–æ•¸æ“šåº«
@app.before_first_request
def create_tables():
    """å‰µå»ºæ•¸æ“šåº«è¡¨"""
    db.create_all()
    
    # å‰µå»ºä¸€äº›ç¤ºä¾‹æ•¸æ“š
    if User.query.count() == 0:
        sample_users = [
            User(username='alice', email='alice@example.com'),
            User(username='bob', email='bob@example.com')
        ]
        
        for user in sample_users:
            db.session.add(user)
        
        db.session.commit()

if __name__ == '__main__':
    app.run(debug=True)
```

### (å››) RESTful API è¨­è¨ˆ

RESTful API æ˜¯ä¸€ç¨®å»ºæ§‹ Web æœå‹™çš„æ¶æ§‹é¢¨æ ¼ï¼Œéµå¾ª RESTï¼ˆRepresentational State Transferï¼‰åŸå‰‡ã€‚

#### 1. REST æ ¸å¿ƒåŸå‰‡

| åŸå‰‡ | èªªæ˜ | å¯¦ç¾æ–¹å¼ |
|------|------|----------|
| ç„¡ç‹€æ…‹ | æ¯å€‹è«‹æ±‚åŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯ | ä¸ä¾è³´ session |
| è³‡æºå°å‘ | ä½¿ç”¨åè©è€Œéå‹•è© | `/users` è€Œé `/getUsers` |
| HTTP æ–¹æ³• | ä½¿ç”¨é©ç•¶çš„ HTTP å‹•è© | GETã€POSTã€PUTã€DELETE |
| çµ±ä¸€ä»‹é¢ | ä¸€è‡´çš„ URL çµæ§‹ | `/api/v1/resources/{id}` |

#### 2. HTTP ç‹€æ…‹ç¢¼ä½¿ç”¨

| é¡åˆ¥ | ç¯„åœ | å¸¸ç”¨ç‹€æ…‹ç¢¼ | èªªæ˜ |
|------|------|------------|------|
| æˆåŠŸ | 2xx | 200, 201, 204 | è«‹æ±‚æˆåŠŸ |
| é‡å®šå‘ | 3xx | 301, 302 | éœ€è¦é€²ä¸€æ­¥æ“ä½œ |
| å®¢æˆ¶ç«¯éŒ¯èª¤ | 4xx | 400, 401, 404 | å®¢æˆ¶ç«¯å•é¡Œ |
| æœå‹™å™¨éŒ¯èª¤ | 5xx | 500, 502, 503 | æœå‹™å™¨å•é¡Œ |

#### 3. RESTful URL è¨­è¨ˆæ¨¡å¼

| æ“ä½œ | HTTP æ–¹æ³• | URL | èªªæ˜ |
|------|-----------|-----|------|
| ç²å–åˆ—è¡¨ | GET | `/api/users` | ç²å–æ‰€æœ‰ç”¨æˆ¶ |
| ç²å–å–®å€‹ | GET | `/api/users/123` | ç²å–ç‰¹å®šç”¨æˆ¶ |
| å‰µå»º | POST | `/api/users` | å‰µå»ºæ–°ç”¨æˆ¶ |
| æ›´æ–° | PUT | `/api/users/123` | å®Œæ•´æ›´æ–°ç”¨æˆ¶ |
| éƒ¨åˆ†æ›´æ–° | PATCH | `/api/users/123` | éƒ¨åˆ†æ›´æ–°ç”¨æˆ¶ |
| åˆªé™¤ | DELETE | `/api/users/123` | åˆªé™¤ç”¨æˆ¶ |

```python
from flask import Flask, jsonify, request, abort
from flask_restful import Resource, Api, reqparse
from werkzeug.exceptions import BadRequest
import logging

app = Flask(__name__)
api = Api(app)

# é…ç½®æ—¥èªŒ
logging.basicConfig(level=logging.INFO)
logger = app.logger

# æ¨¡æ“¬æ•¸æ“šå­˜å„²
items_db = {
    1: {'id': 1, 'name': 'Item 1', 'description': 'First item', 'category': 'A'},
    2: {'id': 2, 'name': 'Item 2', 'description': 'Second item', 'category': 'B'},
    3: {'id': 3, 'name': 'Item 3', 'description': 'Third item', 'category': 'A'}
}
next_id = 4

# è«‹æ±‚è§£æå™¨
item_parser = reqparse.RequestParser()
item_parser.add_argument('name', type=str, required=True, help='Name is required')
item_parser.add_argument('description', type=str, default='')
item_parser.add_argument('category', type=str, default='default')

class ItemListResource(Resource):
    """é …ç›®åˆ—è¡¨è³‡æº"""
    
    def get(self):
        """ç²å–é …ç›®åˆ—è¡¨"""
        # æŸ¥è©¢åƒæ•¸
        category = request.args.get('category')
        page = request.args.get('page', 1, type=int)
        per_page = request.args.get('per_page', 10, type=int)
        
        # éæ¿¾æ•¸æ“š
        items = list(items_db.values())
        if category:
            items = [item for item in items if item['category'] == category]
        
        # åˆ†é 
        total = len(items)
        start = (page - 1) * per_page
        end = start + per_page
        paginated_items = items[start:end]
        
        return {
            'items': paginated_items,
            'pagination': {
                'page': page,
                'per_page': per_page,
                'total': total,
                'pages': (total + per_page - 1) // per_page,
                'has_next': end < total,
                'has_prev': page > 1
            }
        }
    
    def post(self):
        """å‰µå»ºæ–°é …ç›®"""
        try:
            args = item_parser.parse_args()
            
            global next_id
            new_item = {
                'id': next_id,
                'name': args['name'],
                'description': args['description'],
                'category': args['category']
            }
            
            items_db[next_id] = new_item
            next_id += 1
            
            logger.info(f"Created item: {new_item}")
            return new_item, 201
            
        except BadRequest as e:
            return {'error': 'Invalid input', 'details': str(e)}, 400
        except Exception as e:
            logger.error(f"Error creating item: {e}")
            return {'error': 'Internal server error'}, 500

class ItemResource(Resource):
    """å–®å€‹é …ç›®è³‡æº"""
    
    def get(self, item_id):
        """ç²å–å–®å€‹é …ç›®"""
        if item_id not in items_db:
            abort(404, description="Item not found")
        
        return items_db[item_id]
    
    def put(self, item_id):
        """å®Œæ•´æ›´æ–°é …ç›®"""
        if item_id not in items_db:
            abort(404, description="Item not found")
        
        try:
            args = item_parser.parse_args()
            
            updated_item = {
                'id': item_id,
                'name': args['name'],
                'description': args['description'],
                'category': args['category']
            }
            
            items_db[item_id] = updated_item
            
            logger.info(f"Updated item {item_id}: {updated_item}")
            return updated_item
            
        except BadRequest as e:
            return {'error': 'Invalid input', 'details': str(e)}, 400
        except Exception as e:
            logger.error(f"Error updating item {item_id}: {e}")
            return {'error': 'Internal server error'}, 500
    
    def patch(self, item_id):
        """éƒ¨åˆ†æ›´æ–°é …ç›®"""
        if item_id not in items_db:
            abort(404, description="Item not found")
        
        try:
            # è§£æéƒ¨åˆ†æ›´æ–°çš„æ•¸æ“š
            patch_parser = reqparse.RequestParser()
            patch_parser.add_argument('name', type=str)
            patch_parser.add_argument('description', type=str)
            patch_parser.add_argument('category', type=str)
            args = patch_parser.parse_args()
            
            # åªæ›´æ–°æä¾›çš„å­—æ®µ
            item = items_db[item_id]
            for key, value in args.items():
                if value is not None:
                    item[key] = value
            
            logger.info(f"Patched item {item_id}: {item}")
            return item
            
        except Exception as e:
            logger.error(f"Error patching item {item_id}: {e}")
            return {'error': 'Internal server error'}, 500
    
    def delete(self, item_id):
        """åˆªé™¤é …ç›®"""
        if item_id not in items_db:
            abort(404, description="Item not found")
        
        try:
            deleted_item = items_db.pop(item_id)
            logger.info(f"Deleted item {item_id}: {deleted_item}")
            return {'message': 'Item deleted successfully'}, 204
            
        except Exception as e:
            logger.error(f"Error deleting item {item_id}: {e}")
            return {'error': 'Internal server error'}, 500

# è¨»å†Šè³‡æº
api.add_resource(ItemListResource, '/api/items')
api.add_resource(ItemResource, '/api/items/<int:item_id>')

# æœç´¢ç«¯é»
@app.route('/api/items/search')
def search_items():
    """æœç´¢é …ç›®"""
    query = request.args.get('q', '').lower()
    category = request.args.get('category')
    
    if not query:
        return jsonify({'error': 'Query parameter q is required'}), 400
    
    # åŸ·è¡Œæœç´¢
    results = []
    for item in items_db.values():
        if query in item['name'].lower() or query in item['description'].lower():
            if not category or item['category'] == category:
                results.append(item)
    
    return jsonify({
        'query': query,
        'category': category,
        'results': results,
        'total': len(results)
    })

if __name__ == '__main__':
    app.run(debug=True)
```

### (äº”) éŒ¯èª¤è™•ç†èˆ‡ä¸­é–“ä»¶

è‰¯å¥½çš„éŒ¯èª¤è™•ç†æ˜¯ Web æ‡‰ç”¨ç¨‹å¼çš„é‡è¦çµ„æˆéƒ¨åˆ†ï¼Œå®ƒèƒ½æä¾›æ›´å¥½çš„ç”¨æˆ¶é«”é©—å’Œæ›´å®¹æ˜“çš„é™¤éŒ¯ã€‚

#### 1. HTTP éŒ¯èª¤è™•ç†ç­–ç•¥

| éŒ¯èª¤é¡å‹ | è™•ç†æ–¹å¼ | å›æ‡‰æ ¼å¼ |
|----------|----------|----------|
| å®¢æˆ¶ç«¯éŒ¯èª¤ | æ˜ç¢ºéŒ¯èª¤è¨Šæ¯ | è©³ç´°èªªæ˜å•é¡Œ |
| æœå‹™å™¨éŒ¯èª¤ | è¨˜éŒ„æ—¥èªŒ | ä¸æš´éœ²å…§éƒ¨ä¿¡æ¯ |
| é©—è­‰éŒ¯èª¤ | å­—æ®µç´šåˆ¥å›é¥‹ | å…·é«”é©—è­‰å¤±æ•—åŸå›  |
| æ¥­å‹™é‚è¼¯éŒ¯èª¤ | æ¥­å‹™è¦å‰‡èªªæ˜ | æ¸…æ™°çš„éŒ¯èª¤ç¢¼ |

#### 2. è‡ªå®šç¾©ç•°å¸¸é¡

| ç•°å¸¸é¡å‹ | ç”¨é€” | HTTP ç‹€æ…‹ç¢¼ |
|----------|------|-------------|
| `ValidationError` | æ•¸æ“šé©—è­‰å¤±æ•— | 400 |
| `AuthenticationError` | èªè­‰å¤±æ•— | 401 |
| `AuthorizationError` | æˆæ¬Šå¤±æ•— | 403 |
| `ResourceNotFoundError` | è³‡æºä¸å­˜åœ¨ | 404 |
| `BusinessLogicError` | æ¥­å‹™é‚è¼¯éŒ¯èª¤ | 422 |

```python
from flask import Flask, jsonify, request, abort
from werkzeug.exceptions import HTTPException
import traceback
import logging

app = Flask(__name__)

# é…ç½®æ—¥èªŒ
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = app.logger

# è‡ªå®šç¾©ç•°å¸¸é¡
class APIException(Exception):
    """API åŸºç¤ç•°å¸¸é¡"""
    def __init__(self, message, status_code=400, payload=None):
        super().__init__(message)
        self.message = message
        self.status_code = status_code
        self.payload = payload

class ValidationError(APIException):
    """é©—è­‰éŒ¯èª¤"""
    def __init__(self, message, field=None):
        super().__init__(message, 400)
        self.field = field

class AuthenticationError(APIException):
    """èªè­‰éŒ¯èª¤"""
    def __init__(self, message="Authentication required"):
        super().__init__(message, 401)

class AuthorizationError(APIException):
    """æˆæ¬ŠéŒ¯èª¤"""
    def __init__(self, message="Insufficient permissions"):
        super().__init__(message, 403)

class ResourceNotFoundError(APIException):
    """è³‡æºä¸å­˜åœ¨éŒ¯èª¤"""
    def __init__(self, resource="Resource", resource_id=None):
        message = f"{resource} not found"
        if resource_id:
            message += f" (ID: {resource_id})"
        super().__init__(message, 404)

class BusinessLogicError(APIException):
    """æ¥­å‹™é‚è¼¯éŒ¯èª¤"""
    def __init__(self, message, error_code=None):
        super().__init__(message, 422)
        self.error_code = error_code

# éŒ¯èª¤è™•ç†å™¨
@app.errorhandler(APIException)
def handle_api_exception(error):
    """è™•ç†è‡ªå®šç¾© API ç•°å¸¸"""
    response = {
        'error': {
            'message': error.message,
            'type': error.__class__.__name__
        }
    }
    
    # æ·»åŠ é¡å¤–çš„éŒ¯èª¤ä¿¡æ¯
    if hasattr(error, 'field') and error.field:
        response['error']['field'] = error.field
    
    if hasattr(error, 'error_code') and error.error_code:
        response['error']['code'] = error.error_code
    
    if error.payload:
        response['error']['details'] = error.payload
    
    logger.warning(f"API Exception: {error.message}")
    return jsonify(response), error.status_code

@app.errorhandler(400)
def bad_request(error):
    """è™•ç† 400 éŒ¯èª¤"""
    return jsonify({
        'error': {
            'message': 'Bad request',
            'type': 'BadRequest',
            'details': str(error.description) if error.description else None
        }
    }), 400

@app.errorhandler(404)
def not_found(error):
    """è™•ç† 404 éŒ¯èª¤"""
    return jsonify({
        'error': {
            'message': 'Resource not found',
            'type': 'NotFound',
            'path': request.path
        }
    }), 404

@app.errorhandler(405)
def method_not_allowed(error):
    """è™•ç† 405 éŒ¯èª¤"""
    return jsonify({
        'error': {
            'message': f'Method {request.method} not allowed',
            'type': 'MethodNotAllowed',
            'allowed_methods': list(error.valid_methods) if hasattr(error, 'valid_methods') else None
        }
    }), 405

@app.errorhandler(500)
def internal_error(error):
    """è™•ç† 500 éŒ¯èª¤"""
    # è¨˜éŒ„å®Œæ•´çš„éŒ¯èª¤ä¿¡æ¯
    logger.error(f"Internal server error: {str(error)}")
    logger.error(traceback.format_exc())
    
    # åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ä¸æ‡‰è©²æš´éœ²è©³ç´°çš„éŒ¯èª¤ä¿¡æ¯
    response = {
        'error': {
            'message': 'Internal server error',
            'type': 'InternalServerError'
        }
    }
    
    # é–‹ç™¼ç’°å¢ƒå¯ä»¥åŒ…å«æ›´å¤šè©³ç´°ä¿¡æ¯
    if app.debug:
        response['error']['details'] = str(error)
    
    return jsonify(response), 500

# è«‹æ±‚é©—è­‰ä¸­é–“ä»¶
def validate_json():
    """é©—è­‰ JSON è«‹æ±‚"""
    if request.method in ['POST', 'PUT', 'PATCH']:
        if not request.is_json:
            raise ValidationError("Content-Type must be application/json")
        
        try:
            request.get_json(force=True)
        except Exception:
            raise ValidationError("Invalid JSON format")

# èªè­‰ä¸­é–“ä»¶ç¯„ä¾‹
def require_auth():
    """ç°¡å–®çš„èªè­‰æª¢æŸ¥"""
    auth_header = request.headers.get('Authorization')
    if not auth_header:
        raise AuthenticationError("Authorization header required")
    
    if not auth_header.startswith('Bearer '):
        raise AuthenticationError("Invalid authorization format")
    
    token = auth_header.split(' ')[1]
    if token != 'valid_token':  # å¯¦éš›æ‡‰ç”¨ä¸­æ‡‰è©²é©—è­‰ JWT æˆ–å…¶ä»– token
        raise AuthenticationError("Invalid token")

# æ¥­å‹™é‚è¼¯ç¯„ä¾‹
@app.route('/api/users', methods=['POST'])
def create_user():
    """å‰µå»ºç”¨æˆ¶"""
    try:
        validate_json()
        data = request.get_json()
        
        # æ•¸æ“šé©—è­‰
        if not data.get('username'):
            raise ValidationError("Username is required", field="username")
        
        if not data.get('email'):
            raise ValidationError("Email is required", field="email")
        
        if len(data['username']) < 3:
            raise ValidationError("Username must be at least 3 characters", field="username")
        
        # æ¨¡æ“¬æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å·²å­˜åœ¨
        if data['username'] == 'existing_user':
            raise BusinessLogicError(
                "Username already exists",
                error_code="USER_EXISTS"
            )
        
        # æ¨¡æ“¬å‰µå»ºç”¨æˆ¶
        new_user = {
            'id': 123,
            'username': data['username'],
            'email': data['email'],
            'created_at': '2024-01-01T00:00:00Z'
        }
        
        return jsonify(new_user), 201
        
    except APIException:
        # é‡æ–°æ‹‹å‡º API ç•°å¸¸ï¼Œè®“éŒ¯èª¤è™•ç†å™¨è™•ç†
        raise
    except Exception as e:
        # æ•ç²æ‰€æœ‰å…¶ä»–ç•°å¸¸ä¸¦è¨˜éŒ„
        logger.error(f"Unexpected error in create_user: {e}")
        raise APIException("An unexpected error occurred", 500)

@app.route('/api/protected')
def protected_resource():
    """éœ€è¦èªè­‰çš„è³‡æº"""
    require_auth()
    return jsonify({'message': 'This is a protected resource'})

@app.route('/api/users/<int:user_id>')
def get_user(user_id):
    """ç²å–ç”¨æˆ¶ä¿¡æ¯"""
    # æ¨¡æ“¬ç”¨æˆ¶ä¸å­˜åœ¨çš„æƒ…æ³
    if user_id == 999:
        raise ResourceNotFoundError("User", user_id)
    
    return jsonify({
        'id': user_id,
        'username': f'user_{user_id}',
        'email': f'user_{user_id}@example.com'
    })

# å…¨å±€éŒ¯èª¤è™•ç†ä¸­é–“ä»¶
@app.before_request
def log_request_info():
    """è¨˜éŒ„è«‹æ±‚ä¿¡æ¯"""
    logger.info(f"{request.method} {request.path} - {request.remote_addr}")

@app.after_request
def log_response_info(response):
    """è¨˜éŒ„å›æ‡‰ä¿¡æ¯"""
    logger.info(f"Response: {response.status_code}")
    return response

# å¥åº·æª¢æŸ¥ç«¯é»
@app.route('/health')
def health_check():
    """å¥åº·æª¢æŸ¥"""
    return jsonify({
        'status': 'healthy',
        'timestamp': '2024-01-01T00:00:00Z'
    })

if __name__ == '__main__':
    app.run(debug=True)
```

## ä¸‰ã€å‰å¾Œç«¯æ•´åˆ

### (ä¸€) API ä»‹é¢è¨­è¨ˆèˆ‡èª¿ç”¨

å‰å¾Œç«¯åˆ†é›¢æ¶æ§‹ä¸­ï¼ŒAPI æ˜¯å‰å¾Œç«¯é€šä¿¡çš„æ©‹æ¨‘ï¼Œè¨­è¨ˆè‰¯å¥½çš„ API ä»‹é¢å°æ–¼æ•´å€‹ç³»çµ±çš„å¯ç¶­è­·æ€§è‡³é—œé‡è¦ã€‚

#### 1. API è¨­è¨ˆåŸå‰‡

| åŸå‰‡ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| ä¸€è‡´æ€§ | çµ±ä¸€çš„å‘½åå’Œçµæ§‹ | æ‰€æœ‰æ™‚é–“æ ¼å¼éƒ½ç”¨ ISO 8601 |
| å¯é æ¸¬æ€§ | éµå¾ªæ¨™æº–æ…£ä¾‹ | RESTful URL è¨­è¨ˆ |
| ç‰ˆæœ¬æ§åˆ¶ | æ”¯æ´ API æ¼”é€² | `/api/v1/users` |
| æ–‡æª”åŒ– | å®Œæ•´çš„ API æ–‡æª” | Swagger/OpenAPI |

#### 2. å‰ç«¯ HTTP å®¢æˆ¶ç«¯é¸æ“‡

| å·¥å…· | ç‰¹é» | é©ç”¨å ´æ™¯ |
|------|------|----------|
| Fetch API | ç€è¦½å™¨åŸç”Ÿ | ç°¡å–®è«‹æ±‚ |
| Axios | åŠŸèƒ½è±å¯Œ | è¤‡é›œæ‡‰ç”¨ |
| SWR/React Query | æ•¸æ“šç·©å­˜ | React æ‡‰ç”¨ |
| Vue Apollo | GraphQL | Vue + GraphQL |

```javascript
// å‰ç«¯ API èª¿ç”¨å®Œæ•´ç¯„ä¾‹
import axios from 'axios'

// å‰µå»º Axios å¯¦ä¾‹
const api = axios.create({
  baseURL: process.env.VUE_APP_API_BASE_URL || 'http://localhost:5000/api',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// è«‹æ±‚æ””æˆªå™¨
api.interceptors.request.use(
  config => {
    // æ·»åŠ èªè­‰ token
    const token = localStorage.getItem('auth_token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    
    // è«‹æ±‚æ—¥èªŒ
    console.log(`API Request: ${config.method?.toUpperCase()} ${config.url}`)
    return config
  },
  error => {
    console.error('Request error:', error)
    return Promise.reject(error)
  }
)

// å›æ‡‰æ””æˆªå™¨
api.interceptors.response.use(
  response => {
    console.log(`API Response: ${response.status} ${response.config.url}`)
    return response
  },
  error => {
    // çµ±ä¸€éŒ¯èª¤è™•ç†
    const { response } = error
    
    if (response) {
      switch (response.status) {
        case 401:
          // æœªèªè­‰ï¼Œè·³è½‰åˆ°ç™»å…¥é 
          localStorage.removeItem('auth_token')
          window.location.href = '/login'
          break
        case 403:
          // ç„¡æ¬Šé™
          console.error('Access denied')
          break
        case 404:
          // è³‡æºä¸å­˜åœ¨
          console.error('Resource not found')
          break
        case 422:
          // æ¥­å‹™é‚è¼¯éŒ¯èª¤
          console.error('Business logic error:', response.data.error?.message)
          break
        case 500:
          // æœå‹™å™¨éŒ¯èª¤
          console.error('Server error')
          break
        default:
          console.error('API Error:', response.data.error?.message || 'Unknown error')
      }
    } else {
      // ç¶²è·¯éŒ¯èª¤
      console.error('Network error:', error.message)
    }
    
    return Promise.reject(error)
  }
)

// API æœå‹™é¡
class UserService {
  /**
   * ç²å–ç”¨æˆ¶åˆ—è¡¨
   * @param {Object} params - æŸ¥è©¢åƒæ•¸
   * @returns {Promise} ç”¨æˆ¶åˆ—è¡¨
   */
  static async getUsers(params = {}) {
    try {
      const response = await api.get('/users', { params })
      return {
        data: response.data.users,
        pagination: response.data.pagination,
        success: true
      }
    } catch (error) {
      return {
        data: [],
        error: error.response?.data?.error?.message || 'Failed to fetch users',
        success: false
      }
    }
  }

  /**
   * ç²å–å–®å€‹ç”¨æˆ¶
   * @param {number} userId - ç”¨æˆ¶ ID
   * @returns {Promise} ç”¨æˆ¶ä¿¡æ¯
   */
  static async getUser(userId) {
    try {
      const response = await api.get(`/users/${userId}`)
      return {
        data: response.data,
        success: true
      }
    } catch (error) {
      return {
        data: null,
        error: error.response?.data?.error?.message || `Failed to fetch user ${userId}`,
        success: false
      }
    }
  }

  /**
   * å‰µå»ºç”¨æˆ¶
   * @param {Object} userData - ç”¨æˆ¶æ•¸æ“š
   * @returns {Promise} å‰µå»ºçµæœ
   */
  static async createUser(userData) {
    try {
      const response = await api.post('/users', userData)
      return {
        data: response.data,
        success: true
      }
    } catch (error) {
      const errorData = error.response?.data?.error
      return {
        data: null,
        error: errorData?.message || 'Failed to create user',
        field: errorData?.field,
        success: false
      }
    }
  }

  /**
   * æ›´æ–°ç”¨æˆ¶
   * @param {number} userId - ç”¨æˆ¶ ID
   * @param {Object} userData - æ›´æ–°æ•¸æ“š
   * @returns {Promise} æ›´æ–°çµæœ
   */
  static async updateUser(userId, userData) {
    try {
      const response = await api.put(`/users/${userId}`, userData)
      return {
        data: response.data,
        success: true
      }
    } catch (error) {
      return {
        data: null,
        error: error.response?.data?.error?.message || `Failed to update user ${userId}`,
        success: false
      }
    }
  }

  /**
   * åˆªé™¤ç”¨æˆ¶
   * @param {number} userId - ç”¨æˆ¶ ID
   * @returns {Promise} åˆªé™¤çµæœ
   */
  static async deleteUser(userId) {
    try {
      await api.delete(`/users/${userId}`)
      return {
        success: true
      }
    } catch (error) {
      return {
        error: error.response?.data?.error?.message || `Failed to delete user ${userId}`,
        success: false
      }
    }
  }

  /**
   * æœç´¢ç”¨æˆ¶
   * @param {string} query - æœç´¢é—œéµå­—
   * @returns {Promise} æœç´¢çµæœ
   */
  static async searchUsers(query) {
    try {
      const response = await api.get('/users/search', {
        params: { q: query }
      })
      return {
        data: response.data.results,
        total: response.data.total,
        success: true
      }
    } catch (error) {
      return {
        data: [],
        error: error.response?.data?.error?.message || 'Failed to search users',
        success: false
      }
    }
  }
}

// ä½¿ç”¨ç¯„ä¾‹
export default UserService

// åœ¨ Vue çµ„ä»¶ä¸­ä½¿ç”¨
export const useUserAPI = () => {
  const loading = ref(false)
  const error = ref(null)

  const fetchUsers = async (params) => {
    loading.value = true
    error.value = null
    
    const result = await UserService.getUsers(params)
    
    if (!result.success) {
      error.value = result.error
    }
    
    loading.value = false
    return result
  }

  const createUser = async (userData) => {
    loading.value = true
    error.value = null
    
    const result = await UserService.createUser(userData)
    
    if (!result.success) {
      error.value = result.error
    }
    
    loading.value = false
    return result
  }

  return {
    loading: readonly(loading),
    error: readonly(error),
    fetchUsers,
    createUser,
    // å…¶ä»–æ–¹æ³•...
  }
}
```

### (äºŒ) CORS è¨­å®šèˆ‡å®‰å…¨

è·¨ä¾†æºè³‡æºå…±äº«ï¼ˆCORSï¼‰æ˜¯ç¾ä»£ Web é–‹ç™¼ä¸­çš„é‡è¦å®‰å…¨æ©Ÿåˆ¶ï¼Œéœ€è¦æ­£ç¢ºé…ç½®ä»¥ç¢ºä¿å‰å¾Œç«¯é€šä¿¡æ­£å¸¸ã€‚

#### 1. CORS åŸºæœ¬æ¦‚å¿µ

| æ¦‚å¿µ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| åŒæºæ”¿ç­– | ç€è¦½å™¨å®‰å…¨é™åˆ¶ | å”è­°ã€åŸŸåã€ç«¯å£éƒ½ç›¸åŒ |
| é æª¢è«‹æ±‚ | OPTIONS è«‹æ±‚ | è¤‡é›œè«‹æ±‚å‰çš„æª¢æŸ¥ |
| ç°¡å–®è«‹æ±‚ | ä¸è§¸ç™¼é æª¢ | GETã€HEADã€POSTï¼ˆç‰¹å®šæ¢ä»¶ï¼‰ |
| æ†‘è­‰è«‹æ±‚ | åŒ…å« Cookie | withCredentials: true |

#### 2. CORS æ¨™é ­

| æ¨™é ­ | ä½œç”¨ | ç¯„ä¾‹å€¼ |
|------|------|--------|
| `Access-Control-Allow-Origin` | å…è¨±çš„ä¾†æº | `*` æˆ– `https://example.com` |
| `Access-Control-Allow-Methods` | å…è¨±çš„æ–¹æ³• | `GET, POST, PUT, DELETE` |
| `Access-Control-Allow-Headers` | å…è¨±çš„æ¨™é ­ | `Content-Type, Authorization` |
| `Access-Control-Allow-Credentials` | å…è¨±æ†‘è­‰ | `true` |

```python
# Flask å¾Œç«¯ CORS é…ç½®
from flask import Flask, jsonify
from flask_cors import CORS
import os

app = Flask(__name__)

# é–‹ç™¼ç’°å¢ƒ CORS é…ç½®
if app.debug:
    CORS(app, 
         origins=['http://localhost:3000', 'http://127.0.0.1:3000'],
         allow_headers=['Content-Type', 'Authorization'],
         methods=['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
         supports_credentials=True)
else:
    # ç”Ÿç”¢ç’°å¢ƒæ›´åš´æ ¼çš„é…ç½®
    allowed_origins = os.getenv('ALLOWED_ORIGINS', '').split(',')
    CORS(app,
         origins=allowed_origins,
         allow_headers=['Content-Type', 'Authorization'],
         methods=['GET', 'POST', 'PUT', 'DELETE'],
         supports_credentials=True)

# æ‰‹å‹• CORS è¨­å®šï¼ˆæ›´ç²¾ç´°çš„æ§åˆ¶ï¼‰
@app.after_request
def after_request(response):
    """æ‰‹å‹•è¨­å®š CORS æ¨™é ­"""
    origin = request.headers.get('Origin')
    
    # æª¢æŸ¥ä¾†æºæ˜¯å¦åœ¨å…è¨±åˆ—è¡¨ä¸­
    allowed_origins = [
        'http://localhost:3000',
        'http://127.0.0.1:3000',
        'https://yourapp.com'
    ]
    
    if origin in allowed_origins:
        response.headers['Access-Control-Allow-Origin'] = origin
        response.headers['Access-Control-Allow-Credentials'] = 'true'
        response.headers['Access-Control-Allow-Methods'] = 'GET, POST, PUT, DELETE, OPTIONS'
        response.headers['Access-Control-Allow-Headers'] = 'Content-Type, Authorization, X-Requested-With'
    
    return response

# è™•ç†é æª¢è«‹æ±‚
@app.route('/api/<path:path>', methods=['OPTIONS'])
def handle_options(path):
    """è™•ç† OPTIONS é æª¢è«‹æ±‚"""
    return '', 204
```

```javascript
// å‰ç«¯ CORS è™•ç†
const api = axios.create({
  baseURL: 'http://localhost:5000/api',
  withCredentials: true,  // ç™¼é€ cookies
  headers: {
    'Content-Type': 'application/json'
  }
})

// è™•ç† CORS éŒ¯èª¤
api.interceptors.response.use(
  response => response,
  error => {
    if (error.code === 'ERR_NETWORK') {
      console.error('CORS error or network issue')
      // é¡¯ç¤ºç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤è¨Šæ¯
    }
    return Promise.reject(error)
  }
)
```

### (ä¸‰) æª”æ¡ˆä¸Šå‚³è™•ç†

æª”æ¡ˆä¸Šå‚³æ˜¯ Web æ‡‰ç”¨ä¸­çš„å¸¸è¦‹éœ€æ±‚ï¼Œéœ€è¦è€ƒæ…®å®‰å…¨æ€§ã€æ•ˆèƒ½å’Œç”¨æˆ¶é«”é©—ç­‰å¤šå€‹æ–¹é¢ã€‚

#### 1. æª”æ¡ˆä¸Šå‚³å®‰å…¨è€ƒé‡

| å®‰å…¨å•é¡Œ | é˜²è­·æªæ–½ | å¯¦ç¾æ–¹å¼ |
|----------|----------|----------|
| æª”æ¡ˆé¡å‹é©—è­‰ | ç™½åå–®éæ¿¾ | æª¢æŸ¥å‰¯æª”åå’Œ MIME é¡å‹ |
| æª”æ¡ˆå¤§å°é™åˆ¶ | è¨­å®šä¸Šé™ | Flask: MAX_CONTENT_LENGTH |
| æª”åå®‰å…¨ | æ¸…ç†æª”å | ä½¿ç”¨ secure_filename() |
| æƒ¡æ„ç¨‹å¼ç¢¼ | ç—…æ¯’æƒæ | ç¬¬ä¸‰æ–¹æƒææœå‹™ |
| å„²å­˜ä½ç½® | éš”é›¢å­˜æ”¾ | å°ˆç”¨ä¸Šå‚³ç›®éŒ„ |

#### 2. ä¸Šå‚³é€²åº¦è¿½è¹¤

| æ–¹æ³• | å„ªé» | ç¼ºé» |
|------|------|------|
| XMLHttpRequest | åŸç”Ÿæ”¯æ´ | ç¨‹å¼ç¢¼è¤‡é›œ |
| Fetch API | ç¾ä»£åŒ– | é€²åº¦æ”¯æ´æœ‰é™ |
| Axios | å…§å»ºé€²åº¦å›èª¿ | éœ€è¦é¡å¤–åº« |
| File API | å®¢æˆ¶ç«¯é è¦½ | ç€è¦½å™¨ç›¸å®¹æ€§ |

```python
# Flask å¾Œç«¯æª”æ¡ˆä¸Šå‚³è™•ç†
from flask import Flask, request, jsonify, send_from_directory
from werkzeug.utils import secure_filename
from werkzeug.exceptions import RequestEntityTooLarge
import os
import uuid
import mimetypes
from pathlib import Path
import hashlib

app = Flask(__name__)

# é…ç½®
app.config['MAX_CONTENT_LENGTH'] = 16 * 1024 * 1024  # 16MB é™åˆ¶
app.config['UPLOAD_FOLDER'] = 'uploads'
app.config['ALLOWED_EXTENSIONS'] = {
    'images': {'png', 'jpg', 'jpeg', 'gif', 'webp'},
    'documents': {'pdf', 'doc', 'docx', 'xls', 'xlsx', 'txt'},
    'data': {'csv', 'json', 'xml'}
}

# ç¢ºä¿ä¸Šå‚³ç›®éŒ„å­˜åœ¨
os.makedirs(app.config['UPLOAD_FOLDER'], exist_ok=True)

def allowed_file(filename, category='images'):
    """æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å…è¨±ä¸Šå‚³"""
    if '.' not in filename:
        return False
    
    extension = filename.rsplit('.', 1)[1].lower()
    return extension in app.config['ALLOWED_EXTENSIONS'].get(category, set())

def get_file_hash(file_path):
    """è¨ˆç®—æª”æ¡ˆ MD5 é›œæ¹Šå€¼"""
    hash_md5 = hashlib.md5()
    with open(file_path, "rb") as f:
        for chunk in iter(lambda: f.read(4096), b""):
            hash_md5.update(chunk)
    return hash_md5.hexdigest()

def validate_file_content(file_path, expected_type):
    """é©—è­‰æª”æ¡ˆå…§å®¹é¡å‹"""
    mime_type, _ = mimetypes.guess_type(file_path)
    
    type_mapping = {
        'images': ['image/'],
        'documents': ['application/pdf', 'application/msword', 'text/'],
        'data': ['text/csv', 'application/json', 'text/xml']
    }
    
    if expected_type in type_mapping:
        allowed_prefixes = type_mapping[expected_type]
        return any(mime_type and mime_type.startswith(prefix) for prefix in allowed_prefixes)
    
    return False

@app.route('/api/upload', methods=['POST'])
def upload_file():
    """è™•ç†æª”æ¡ˆä¸Šå‚³"""
    try:
        # æª¢æŸ¥æ˜¯å¦æœ‰æª”æ¡ˆ
        if 'file' not in request.files:
            return jsonify({'error': 'No file provided'}), 400
        
        file = request.files['file']
        category = request.form.get('category', 'images')
        
        # æª¢æŸ¥æª”æ¡ˆæ˜¯å¦é¸æ“‡
        if file.filename == '':
            return jsonify({'error': 'No file selected'}), 400
        
        # æª¢æŸ¥æª”æ¡ˆé¡å‹
        if not allowed_file(file.filename, category):
            allowed_exts = ', '.join(app.config['ALLOWED_EXTENSIONS'].get(category, []))
            return jsonify({
                'error': f'File type not allowed. Allowed types: {allowed_exts}'
            }), 400
        
        # ç”Ÿæˆå®‰å…¨çš„æª”å
        original_filename = secure_filename(file.filename)
        filename_without_ext = os.path.splitext(original_filename)[0]
        file_extension = os.path.splitext(original_filename)[1]
        
        # ä½¿ç”¨ UUID é¿å…æª”åè¡çª
        unique_filename = f"{filename_without_ext}_{uuid.uuid4().hex[:8]}{file_extension}"
        
        # æŒ‰é¡åˆ¥å‰µå»ºå­ç›®éŒ„
        category_folder = os.path.join(app.config['UPLOAD_FOLDER'], category)
        os.makedirs(category_folder, exist_ok=True)
        
        file_path = os.path.join(category_folder, unique_filename)
        
        # ä¿å­˜æª”æ¡ˆ
        file.save(file_path)
        
        # é©—è­‰æª”æ¡ˆå…§å®¹
        if not validate_file_content(file_path, category):
            os.remove(file_path)  # åˆªé™¤ç„¡æ•ˆæª”æ¡ˆ
            return jsonify({'error': 'File content validation failed'}), 400
        
        # è¨ˆç®—æª”æ¡ˆè³‡è¨Š
        file_size = os.path.getsize(file_path)
        file_hash = get_file_hash(file_path)
        
        # æª”æ¡ˆè³‡è¨Š
        file_info = {
            'id': uuid.uuid4().hex,
            'original_name': file.filename,
            'filename': unique_filename,
            'category': category,
            'size': file_size,
            'size_human': format_file_size(file_size),
            'hash': file_hash,
            'mime_type': mimetypes.guess_type(file_path)[0],
            'upload_time': datetime.utcnow().isoformat(),
            'url': f'/api/files/{category}/{unique_filename}'
        }
        
        # é€™è£¡å¯ä»¥ä¿å­˜åˆ°è³‡æ–™åº«
        # save_file_info_to_db(file_info)
        
        return jsonify({
            'message': 'File uploaded successfully',
            'file': file_info
        }), 201
        
    except RequestEntityTooLarge:
        return jsonify({'error': 'File too large'}), 413
    except Exception as e:
        app.logger.error(f"Upload error: {str(e)}")
        return jsonify({'error': 'Upload failed'}), 500

@app.route('/api/upload/multiple', methods=['POST'])
def upload_multiple_files():
    """è™•ç†å¤šæª”æ¡ˆä¸Šå‚³"""
    try:
        files = request.files.getlist('files')
        category = request.form.get('category', 'images')
        
        if not files:
            return jsonify({'error': 'No files provided'}), 400
        
        uploaded_files = []
        errors = []
        
        for file in files:
            if file.filename == '':
                continue
                
            if not allowed_file(file.filename, category):
                errors.append(f'{file.filename}: File type not allowed')
                continue
            
            try:
                # ä½¿ç”¨ç›¸åŒçš„ä¸Šå‚³é‚è¼¯
                # ... (çœç•¥é‡è¤‡ä»£ç¢¼)
                
                uploaded_files.append({
                    'original_name': file.filename,
                    'filename': unique_filename,
                    'size': file_size
                })
                
            except Exception as e:
                errors.append(f'{file.filename}: {str(e)}')
        
        return jsonify({
            'message': f'Uploaded {len(uploaded_files)} files',
            'uploaded_files': uploaded_files,
            'errors': errors
        }), 201
        
    except Exception as e:
        app.logger.error(f"Multiple upload error: {str(e)}")
        return jsonify({'error': 'Upload failed'}), 500

@app.route('/api/files/<category>/<filename>')
def serve_file(category, filename):
    """æä¾›æª”æ¡ˆä¸‹è¼‰"""
    try:
        category_folder = os.path.join(app.config['UPLOAD_FOLDER'], category)
        return send_from_directory(category_folder, filename)
    except FileNotFoundError:
        return jsonify({'error': 'File not found'}), 404

def format_file_size(size_bytes):
    """æ ¼å¼åŒ–æª”æ¡ˆå¤§å°"""
    if size_bytes == 0:
        return "0B"
    
    size_names = ["B", "KB", "MB", "GB"]
    i = 0
    while size_bytes >= 1024 and i < len(size_names) - 1:
        size_bytes /= 1024.0
        i += 1
    
    return f"{size_bytes:.1f}{size_names[i]}"

if __name__ == '__main__':
    app.run(debug=True)
```

```javascript
// å‰ç«¯æª”æ¡ˆä¸Šå‚³è™•ç†
class FileUploadService {
  constructor(apiBaseURL = '/api') {
    this.apiBaseURL = apiBaseURL
  }

  /**
   * ä¸Šå‚³å–®å€‹æª”æ¡ˆ
   * @param {File} file - æª”æ¡ˆå°è±¡
   * @param {string} category - æª”æ¡ˆé¡åˆ¥
   * @param {Function} onProgress - é€²åº¦å›èª¿
   * @returns {Promise} ä¸Šå‚³çµæœ
   */
  async uploadFile(file, category = 'images', onProgress = null) {
    const formData = new FormData()
    formData.append('file', file)
    formData.append('category', category)

    try {
      const response = await axios.post(`${this.apiBaseURL}/upload`, formData, {
        headers: {
          'Content-Type': 'multipart/form-data'
        },
        onUploadProgress: (progressEvent) => {
          if (onProgress && progressEvent.total) {
            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total)
            onProgress(progress, progressEvent.loaded, progressEvent.total)
          }
        }
      })

      return {
        success: true,
        data: response.data
      }
    } catch (error) {
      return {
        success: false,
        error: error.response?.data?.error || 'Upload failed'
      }
    }
  }

  /**
   * ä¸Šå‚³å¤šå€‹æª”æ¡ˆ
   * @param {FileList} files - æª”æ¡ˆåˆ—è¡¨
   * @param {string} category - æª”æ¡ˆé¡åˆ¥
   * @param {Function} onProgress - é€²åº¦å›èª¿
   * @returns {Promise} ä¸Šå‚³çµæœ
   */
  async uploadMultipleFiles(files, category = 'images', onProgress = null) {
    const formData = new FormData()
    
    Array.from(files).forEach(file => {
      formData.append('files', file)
    })
    formData.append('category', category)

    try {
      const response = await axios.post(`${this.apiBaseURL}/upload/multiple`, formData, {
        headers: {
          'Content-Type': 'multipart/form-data'
        },
        onUploadProgress: (progressEvent) => {
          if (onProgress && progressEvent.total) {
            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total)
            onProgress(progress)
          }
        }
      })

      return {
        success: true,
        data: response.data
      }
    } catch (error) {
      return {
        success: false,
        error: error.response?.data?.error || 'Upload failed'
      }
    }
  }

  /**
   * é©—è­‰æª”æ¡ˆ
   * @param {File} file - æª”æ¡ˆå°è±¡
   * @param {Object} options - é©—è­‰é¸é …
   * @returns {Object} é©—è­‰çµæœ
   */
  validateFile(file, options = {}) {
    const {
      maxSize = 16 * 1024 * 1024, // 16MB
      allowedTypes = ['image/jpeg', 'image/png', 'image/gif'],
      allowedExtensions = ['jpg', 'jpeg', 'png', 'gif']
    } = options

    const errors = []

    // æª¢æŸ¥æª”æ¡ˆå¤§å°
    if (file.size > maxSize) {
      errors.push(`File size exceeds ${this.formatFileSize(maxSize)}`)
    }

    // æª¢æŸ¥æª”æ¡ˆé¡å‹
    if (!allowedTypes.includes(file.type)) {
      errors.push(`File type ${file.type} not allowed`)
    }

    // æª¢æŸ¥å‰¯æª”å
    const extension = file.name.split('.').pop()?.toLowerCase()
    if (extension && !allowedExtensions.includes(extension)) {
      errors.push(`File extension .${extension} not allowed`)
    }

    return {
      valid: errors.length === 0,
      errors
    }
  }

  /**
   * æ ¼å¼åŒ–æª”æ¡ˆå¤§å°
   * @param {number} bytes - ä½å…ƒçµ„æ•¸
   * @returns {string} æ ¼å¼åŒ–å¾Œçš„å¤§å°
   */
  formatFileSize(bytes) {
    if (bytes === 0) return '0 B'
    
    const k = 1024
    const sizes = ['B', 'KB', 'MB', 'GB']
    const i = Math.floor(Math.log(bytes) / Math.log(k))
    
    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i]
  }
}

// Vue çµ„ä»¶ä¸­ä½¿ç”¨
<script setup>
import { ref } from 'vue'

const uploadService = new FileUploadService()
const uploadProgress = ref(0)
const uploading = ref(false)
const selectedFiles = ref([])

const onFileSelect = (event) => {
  selectedFiles.value = Array.from(event.target.files)
  
  // é©—è­‰æª”æ¡ˆ
  selectedFiles.value.forEach(file => {
    const validation = uploadService.validateFile(file)
    if (!validation.valid) {
      console.error(`${file.name}: ${validation.errors.join(', ')}`)
    }
  })
}

const uploadFiles = async () => {
  if (selectedFiles.value.length === 0) return

  uploading.value = true
  uploadProgress.value = 0

  try {
    const result = await uploadService.uploadMultipleFiles(
      selectedFiles.value,
      'images',
      (progress) => {
        uploadProgress.value = progress
      }
    )

    if (result.success) {
      console.log('Upload successful:', result.data)
      selectedFiles.value = []
      document.querySelector('input[type="file"]').value = ''
    } else {
      console.error('Upload failed:', result.error)
    }
  } catch (error) {
    console.error('Upload error:', error)
  } finally {
    uploading.value = false
    uploadProgress.value = 0
  }
}
</script>
```

### (å››) è³‡æ–™è¦–è¦ºåŒ–æ•´åˆ

å°‡è³‡æ–™åˆ†æçµæœæ•´åˆåˆ°å‰ç«¯é€²è¡Œè¦–è¦ºåŒ–æ˜¯ç¾ä»£æ•¸æ“šæ‡‰ç”¨çš„é‡è¦çµ„æˆéƒ¨åˆ†ï¼Œéœ€è¦é¸æ“‡åˆé©çš„åœ–è¡¨åº«ä¸¦è¨­è¨ˆè‰¯å¥½çš„æ•¸æ“šæµã€‚

#### 1. å¸¸ç”¨è¦–è¦ºåŒ–åº«æ¯”è¼ƒ

| åœ–è¡¨åº« | ç‰¹é» | é©ç”¨å ´æ™¯ | å­¸ç¿’é›£åº¦ |
|--------|------|----------|----------|
| Chart.js | è¼•é‡ã€ç°¡å–® | åŸºæœ¬åœ–è¡¨ | ä½ |
| D3.js | åŠŸèƒ½å¼·å¤§ã€éˆæ´» | è¤‡é›œè¦–è¦ºåŒ– | é«˜ |
| Plotly.js | äº’å‹•æ€§å¼· | ç§‘å­¸æ•¸æ“š | ä¸­ |
| ECharts | è±å¯Œçš„åœ–è¡¨é¡å‹ | å•†æ¥­å„€è¡¨æ¿ | ä¸­ |
| Vue-ChartJS | Vue æ•´åˆ | Vue å°ˆæ¡ˆ | ä½ |

#### 2. æ•¸æ“šè™•ç†æµç¨‹

| éšæ®µ | èªªæ˜ | è²¬ä»»æ–¹ |
|------|------|--------|
| æ•¸æ“šæ”¶é›† | å¾å„ç¨®ä¾†æºç²å–åŸå§‹æ•¸æ“š | å¾Œç«¯ |
| æ•¸æ“šæ¸…æ´— | è™•ç†ç¼ºå¤±å€¼ã€ç•°å¸¸å€¼ | å¾Œç«¯ |
| æ•¸æ“šè½‰æ› | è½‰æ›ç‚ºè¦–è¦ºåŒ–æ ¼å¼ | å¾Œç«¯/å‰ç«¯ |
| åœ–è¡¨æ¸²æŸ“ | ç”Ÿæˆäº’å‹•å¼åœ–è¡¨ | å‰ç«¯ |
| ç”¨æˆ¶äº’å‹• | ç¯©é¸ã€ç¸®æ”¾ã€å°å‡º | å‰ç«¯ |

```javascript
// Vue çµ„ä»¶ä¸­æ•´åˆå¤šç¨®åœ–è¡¨åº«
<template>
  <div class="dashboard">
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="controls">
      <select v-model="selectedDataset" @change="updateCharts">
        <option value="sales">éŠ·å”®æ•¸æ“š</option>
        <option value="users">ç”¨æˆ¶æ•¸æ“š</option>
        <option value="performance">æ•ˆèƒ½æ•¸æ“š</option>
      </select>
      
      <input 
        type="date" 
        v-model="startDate" 
        @change="updateCharts"
      >
      <input 
        type="date" 
        v-model="endDate" 
        @change="updateCharts"
      >
      
      <button @click="exportCharts">å°å‡ºåœ–è¡¨</button>
    </div>

    <!-- åœ–è¡¨å®¹å™¨ -->
    <div class="charts-grid">
      <!-- Plotly åœ–è¡¨ -->
      <div class="chart-container">
        <h3>è¶¨å‹¢åˆ†æ</h3>
        <div ref="trendChart" class="chart"></div>
      </div>

      <!-- Chart.js åœ–è¡¨ -->
      <div class="chart-container">
        <h3>åˆ†é¡çµ±è¨ˆ</h3>
        <canvas ref="categoryChart"></canvas>
      </div>

      <!-- ECharts åœ–è¡¨ -->
      <div class="chart-container">
        <h3>åœ°ç†åˆ†å¸ƒ</h3>
        <div ref="mapChart" class="chart"></div>
      </div>

      <!-- è‡ªå®šç¾© D3 åœ–è¡¨ -->
      <div class="chart-container">
        <h3>é—œä¿‚ç¶²çµ¡</h3>
        <div ref="networkChart" class="chart"></div>
      </div>
    </div>

    <!-- æ•¸æ“šè¡¨æ ¼ -->
    <div class="data-table">
      <h3>è©³ç´°æ•¸æ“š</h3>
      <table>
        <thead>
          <tr>
            <th v-for="column in tableColumns" :key="column">
              {{ column }}
            </th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="row in tableData" :key="row.id">
            <td v-for="column in tableColumns" :key="column">
              {{ row[column] }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</template>

<script setup>
import Plotly from 'plotly.js-dist'
import Chart from 'chart.js/auto'
import * as echarts from 'echarts'
import * as d3 from 'd3'
import { ref, onMounted, watch } from 'vue'

// éŸ¿æ‡‰å¼æ•¸æ“š
const selectedDataset = ref('sales')
const startDate = ref('')
const endDate = ref('')
const rawData = ref([])
const processedData = ref({})
const tableData = ref([])
const tableColumns = ref([])

// åœ–è¡¨å¯¦ä¾‹
const trendChart = ref(null)
const categoryChart = ref(null)
const mapChart = ref(null)
const networkChart = ref(null)

let chartInstances = {}

// æ•¸æ“šç²å–å’Œè™•ç†
const fetchData = async () => {
  try {
    const response = await fetch(`/api/analytics/${selectedDataset.value}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        start_date: startDate.value,
        end_date: endDate.value,
        filters: {
          // å…¶ä»–ç¯©é¸æ¢ä»¶
        }
      })
    })
    
    const data = await response.json()
    rawData.value = data.raw_data
    processedData.value = data.processed_data
    tableData.value = data.table_data
    tableColumns.value = data.columns
    
  } catch (error) {
    console.error('æ•¸æ“šç²å–å¤±æ•—:', error)
  }
}

// Plotly è¶¨å‹¢åœ–
const createTrendChart = () => {
  if (!processedData.value.trend) return

  const traces = processedData.value.trend.map(series => ({
    x: series.dates,
    y: series.values,
    type: 'scatter',
    mode: 'lines+markers',
    name: series.name,
    line: { width: 2 }
  }))

  const layout = {
        title: 'è¶¨å‹¢åˆ†æ',
        xaxis: { 
          title: 'æ™‚é–“',
          type: 'date'
        },
        yaxis: { title: 'æ•¸å€¼' },
        responsive: true,
        hovermode: 'x unified'
      }

      const config = {
        responsive: true,
        displayModeBar: true,
        modeBarButtonsToAdd: ['downloadSVG'],
        toImageButtonOptions: {
          format: 'png',
          filename: 'trend_chart',
          height: 500,
          width: 800
        }
      }

      Plotly.newPlot(trendChart.value, traces, layout, config)
    }

    // Chart.js åˆ†é¡åœ–
    const createCategoryChart = () => {
      if (!processedData.value.categories) return

      const ctx = categoryChart.value.getContext('2d')
      
      if (chartInstances.categoryChart) {
        chartInstances.categoryChart.destroy()
      }

      chartInstances.categoryChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: processedData.value.categories.labels,
          datasets: [{
            data: processedData.value.categories.values,
            backgroundColor: [
              '#FF6384', '#36A2EB', '#FFCE56',
              '#4BC0C0', '#9966FF', '#FF9F40'
            ],
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'bottom'
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  const total = context.dataset.data.reduce((a, b) => a + b, 0)
                  const percentage = ((context.raw / total) * 100).toFixed(1)
                  return `${context.label}: ${context.raw} (${percentage}%)`
                }
              }
            }
          }
        }
      })
    }

    // ECharts åœ°åœ–
    const createMapChart = () => {
      if (!processedData.value.geographic) return

      const myChart = echarts.init(mapChart.value)
      
      const option = {
        title: {
          text: 'åœ°ç†åˆ†å¸ƒ',
          left: 'center'
        },
        tooltip: {
          trigger: 'item',
          formatter: '{b}: {c}'
        },
        visualMap: {
          min: 0,
          max: Math.max(...processedData.value.geographic.values),
          left: 'left',
          top: 'bottom',
          text: ['é«˜', 'ä½'],
          calculable: true
        },
        series: [{
          name: 'æ•¸æ“šåˆ†å¸ƒ',
          type: 'map',
          map: 'world',
          roam: true,
          data: processedData.value.geographic.data
        }]
      }

      myChart.setOption(option)
      chartInstances.mapChart = myChart
    }

    // D3 ç¶²çµ¡åœ–
    const createNetworkChart = () => {
      if (!processedData.value.network) return

      // æ¸…é™¤èˆŠåœ–è¡¨
      d3.select(networkChart.value).selectAll("*").remove()

      const width = 600
      const height = 400

      const svg = d3.select(networkChart.value)
        .append("svg")
        .attr("width", width)
        .attr("height", height)

      const simulation = d3.forceSimulation(processedData.value.network.nodes)
        .force("link", d3.forceLink(processedData.value.network.links).id(d => d.id))
        .force("charge", d3.forceManyBody().strength(-300))
        .force("center", d3.forceCenter(width / 2, height / 2))

      const link = svg.append("g")
        .selectAll("line")
        .data(processedData.value.network.links)
        .enter().append("line")
        .attr("stroke", "#999")
        .attr("stroke-width", 2)

      const node = svg.append("g")
        .selectAll("circle")
        .data(processedData.value.network.nodes)
        .enter().append("circle")
        .attr("r", d => d.size || 5)
        .attr("fill", d => d.color || "#69b3a2")
        .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end", dragended))

      // æ·»åŠ æ¨™ç±¤
      const label = svg.append("g")
        .selectAll("text")
        .data(processedData.value.network.nodes)
        .enter().append("text")
        .text(d => d.name)
        .attr("font-size", 12)
        .attr("dx", 12)
        .attr("dy", 4)

      simulation.on("tick", () => {
        link
          .attr("x1", d => d.source.x)
          .attr("y1", d => d.source.y)
          .attr("x2", d => d.target.x)
          .attr("y2", d => d.target.y)

        node
          .attr("cx", d => d.x)
          .attr("cy", d => d.y)

        label
          .attr("x", d => d.x)
          .attr("y", d => d.y)
      })

      function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart()
        d.fx = d.x
        d.fy = d.y
      }

      function dragged(event, d) {
        d.fx = event.x
        d.fy = event.y
      }

      function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0)
        d.fx = null
        d.fy = null
      }
    }

    // æ›´æ–°æ‰€æœ‰åœ–è¡¨
    const updateCharts = async () => {
      await fetchData()
      createTrendChart()
      createCategoryChart()
      createMapChart()
      createNetworkChart()
    }

    // å°å‡ºåŠŸèƒ½
    const exportCharts = () => {
      // å°å‡º Plotly åœ–è¡¨
      Plotly.downloadImage(trendChart.value, {
        format: 'png',
        width: 800,
        height: 600,
        filename: 'trend_chart'
      })

      // å°å‡º Chart.js åœ–è¡¨
      if (chartInstances.categoryChart) {
        const link = document.createElement('a')
        link.download = 'category_chart.png'
        link.href = chartInstances.categoryChart.toBase64Image()
        link.click()
      }

      // å°å‡º ECharts åœ–è¡¨
      if (chartInstances.mapChart) {
        const link = document.createElement('a')
        link.download = 'map_chart.png'
        link.href = chartInstances.mapChart.getDataURL({
          type: 'png',
          pixelRatio: 2,
          backgroundColor: '#fff'
        })
        link.click()
      }
    }

    // ç”Ÿå‘½é€±æœŸ
    onMounted(() => {
      // è¨­å®šé è¨­æ—¥æœŸ
      const today = new Date()
      const lastMonth = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate())
      
      endDate.value = today.toISOString().split('T')[0]
      startDate.value = lastMonth.toISOString().split('T')[0]
      
      updateCharts()
    })

    // ç›£è½æ•¸æ“šè®ŠåŒ–
    watch([selectedDataset, startDate, endDate], updateCharts)

    return {
      selectedDataset,
      startDate,
      endDate,
      tableData,
      tableColumns,
      trendChart,
      categoryChart,
      mapChart,
      networkChart,
      updateCharts,
      exportCharts
    }
  }
}
</script>

<style scoped>
.dashboard {
  padding: 20px;
}

.controls {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  padding: 15px;
  background: #f5f5f5;
  border-radius: 8px;
}

.charts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.chart-container {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.chart {
  height: 400px;
}

.data-table {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 8px 12px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: #f8f9fa;
  font-weight: 600;
}
</style>
```

### (äº”) ç‹€æ…‹ç®¡ç†

åœ¨è¤‡é›œçš„å‰ç«¯æ‡‰ç”¨ä¸­ï¼Œç‹€æ…‹ç®¡ç†æ˜¯çµ„ç¹”æ•¸æ“šæµå’Œä¿æŒæ‡‰ç”¨ä¸€è‡´æ€§çš„é—œéµï¼ŒVue ç”Ÿæ…‹ç³»çµ±æä¾›äº†å¤šç¨®ç‹€æ…‹ç®¡ç†æ–¹æ¡ˆã€‚

#### 1. ç‹€æ…‹ç®¡ç†æ–¹æ¡ˆæ¯”è¼ƒ

| æ–¹æ¡ˆ | é©ç”¨å ´æ™¯ | å­¸ç¿’æˆæœ¬ | åŠŸèƒ½ç‰¹é» |
|------|----------|----------|----------|
| Props/Emit | ç°¡å–®çµ„ä»¶é€šä¿¡ | ä½ | Vue å…§å»º |
| Provide/Inject | è·¨å±¤ç´šå‚³é | ä½ | ä¾è³´æ³¨å…¥ |
| Vuex | ä¸­å¤§å‹æ‡‰ç”¨ | ä¸­ | é›†ä¸­å¼ç‹€æ…‹ç®¡ç† |
| Pinia | ç¾ä»£ Vue æ‡‰ç”¨ | ä¸­ | TypeScript å‹å¥½ |
| Composition API | å±€éƒ¨ç‹€æ…‹ | ä½ | é‚è¼¯å¾©ç”¨ |

#### 2. Vuex æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | ä½œç”¨ | ç‰¹é» |
|------|------|------|
| State | ç‹€æ…‹å­˜å„² | éŸ¿æ‡‰å¼æ•¸æ“š |
| Getters | è¨ˆç®—å±¬æ€§ | æ´¾ç”Ÿç‹€æ…‹ |
| Mutations | åŒæ­¥è®Šæ›´ | å¯è¿½è¹¤çš„è®Šæ›´ |
| Actions | ç•°æ­¥æ“ä½œ | æ¥­å‹™é‚è¼¯ |
| Modules | æ¨¡çµ„åŒ– | å‘½åç©ºé–“ |

#### 3. Pinia vs Vuex

| ç‰¹æ€§ | Vuex | Pinia |
|------|------|-------|
| TypeScript | æœ‰é™æ”¯æ´ | å®Œæ•´æ”¯æ´ |
| èªæ³• | è¼ƒè¤‡é›œ | æ›´ç°¡æ½” |
| é–‹ç™¼å·¥å…· | Vue DevTools | Vue DevTools |
| æ¨¡çµ„åŒ– | æ‰‹å‹•é…ç½® | è‡ªå‹•æ¨¡çµ„åŒ– |
| Vue 3 ç›¸å®¹ | éœ€è¦ Vuex 4 | åŸç”Ÿæ”¯æ´ |

```javascript
// Vuex å®Œæ•´ç‹€æ…‹ç®¡ç†ç¯„ä¾‹
import { createStore } from 'vuex'
import userModule from './modules/user'
import dataModule from './modules/data'
import uiModule from './modules/ui'

const store = createStore({
  modules: {
    user: userModule,
    data: dataModule,
    ui: uiModule
  },
  strict: process.env.NODE_ENV !== 'production'
})

// modules/user.js - ç”¨æˆ¶æ¨¡çµ„
const userModule = {
  namespaced: true,
  
  state: () => ({
    currentUser: null,
    users: [],
    loading: false,
    error: null,
    preferences: {
      theme: 'light',
      language: 'zh-TW'
    }
  }),

  getters: {
    isAuthenticated: state => !!state.currentUser,
    
    userById: state => id => {
      return state.users.find(user => user.id === id)
    },
    
    activeUsers: state => {
      return state.users.filter(user => user.is_active)
    },
    
    userCount: (state, getters) => {
      return getters.activeUsers.length
    }
  },

  mutations: {
    SET_CURRENT_USER(state, user) {
      state.currentUser = user
    },
    
    SET_USERS(state, users) {
      state.users = users
    },
    
    ADD_USER(state, user) {
      state.users.push(user)
    },
    
    UPDATE_USER(state, updatedUser) {
      const index = state.users.findIndex(user => user.id === updatedUser.id)
      if (index !== -1) {
        state.users.splice(index, 1, updatedUser)
      }
    },
    
    REMOVE_USER(state, userId) {
      state.users = state.users.filter(user => user.id !== userId)
    },
    
    SET_LOADING(state, status) {
      state.loading = status
    },
    
    SET_ERROR(state, error) {
      state.error = error
    },
    
    CLEAR_ERROR(state) {
      state.error = null
    },
    
    UPDATE_PREFERENCES(state, preferences) {
      state.preferences = { ...state.preferences, ...preferences }
    }
  },

  actions: {
    async login({ commit, dispatch }, { username, password }) {
      commit('SET_LOADING', true)
      commit('CLEAR_ERROR')
      
      try {
        const response = await api.post('/auth/login', {
          username,
          password
        })
        
        const user = response.data.user
        const token = response.data.token
        
        // ä¿å­˜ token
        localStorage.setItem('auth_token', token)
        
        commit('SET_CURRENT_USER', user)
        
        // ç²å–ç”¨æˆ¶åå¥½è¨­å®š
        await dispatch('loadUserPreferences')
        
        return { success: true, user }
        
      } catch (error) {
        const errorMessage = error.response?.data?.error?.message || 'ç™»å…¥å¤±æ•—'
        commit('SET_ERROR', errorMessage)
        return { success: false, error: errorMessage }
        
      } finally {
        commit('SET_LOADING', false)
      }
    },

    async logout({ commit }) {
      try {
        await api.post('/auth/logout')
      } catch (error) {
        console.warn('Logout request failed:', error)
      } finally {
        // æ¸…é™¤æœ¬åœ°æ•¸æ“š
        localStorage.removeItem('auth_token')
        commit('SET_CURRENT_USER', null)
        commit('CLEAR_ERROR')
      }
    },

    async fetchUsers({ commit, state }, { page = 1, search = '' } = {}) {
      if (state.loading) return
      
      commit('SET_LOADING', true)
      commit('CLEAR_ERROR')
      
      try {
        const response = await api.get('/users', {
          params: { page, search }
        })
        
        commit('SET_USERS', response.data.users)
        return response.data
        
      } catch (error) {
        const errorMessage = error.response?.data?.error?.message || 'ç²å–ç”¨æˆ¶åˆ—è¡¨å¤±æ•—'
        commit('SET_ERROR', errorMessage)
        throw error
        
      } finally {
        commit('SET_LOADING', false)
      }
    },

    async createUser({ commit, dispatch }, userData) {
      commit('SET_LOADING', true)
      commit('CLEAR_ERROR')
      
      try {
        const response = await api.post('/users', userData)
        const newUser = response.data
        
        commit('ADD_USER', newUser)
        
        // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
        dispatch('ui/showNotification', {
          type: 'success',
          message: 'ç”¨æˆ¶å‰µå»ºæˆåŠŸ'
        }, { root: true })
        
        return { success: true, user: newUser }
        
      } catch (error) {
        const errorMessage = error.response?.data?.error?.message || 'å‰µå»ºç”¨æˆ¶å¤±æ•—'
        commit('SET_ERROR', errorMessage)
        
        dispatch('ui/showNotification', {
          type: 'error',
          message: errorMessage
        }, { root: true })
        
        return { success: false, error: errorMessage }
        
      } finally {
        commit('SET_LOADING', false)
      }
    },

    async updateUser({ commit, dispatch }, { userId, userData }) {
      commit('SET_LOADING', true)
      
      try {
        const response = await api.put(`/users/${userId}`, userData)
        const updatedUser = response.data
        
        commit('UPDATE_USER', updatedUser)
        
        dispatch('ui/showNotification', {
          type: 'success',
          message: 'ç”¨æˆ¶æ›´æ–°æˆåŠŸ'
        }, { root: true })
        
        return { success: true, user: updatedUser }
        
      } catch (error) {
        const errorMessage = error.response?.data?.error?.message || 'æ›´æ–°ç”¨æˆ¶å¤±æ•—'
        commit('SET_ERROR', errorMessage)
        return { success: false, error: errorMessage }
        
      } finally {
        commit('SET_LOADING', false)
      }
    },

    async deleteUser({ commit, dispatch }, userId) {
      commit('SET_LOADING', true)
      
      try {
        await api.delete(`/users/${userId}`)
        commit('REMOVE_USER', userId)
        
        dispatch('ui/showNotification', {
          type: 'success',
          message: 'ç”¨æˆ¶åˆªé™¤æˆåŠŸ'
        }, { root: true })
        
        return { success: true }
        
      } catch (error) {
        const errorMessage = error.response?.data?.error?.message || 'åˆªé™¤ç”¨æˆ¶å¤±æ•—'
        commit('SET_ERROR', errorMessage)
        return { success: false, error: errorMessage }
        
      } finally {
        commit('SET_LOADING', false)
      }
    },

    async loadUserPreferences({ commit, state }) {
      if (!state.currentUser) return
      
      try {
        const response = await api.get(`/users/${state.currentUser.id}/preferences`)
        commit('UPDATE_PREFERENCES', response.data)
        
      } catch (error) {
        console.warn('Failed to load user preferences:', error)
      }
    },

    async saveUserPreferences({ commit, state }, preferences) {
      if (!state.currentUser) return
      
      try {
        await api.put(`/users/${state.currentUser.id}/preferences`, preferences)
        commit('UPDATE_PREFERENCES', preferences)
        
      } catch (error) {
        console.error('Failed to save user preferences:', error)
        throw error
      }
    }
  }
}

// modules/data.js - æ•¸æ“šæ¨¡çµ„
const dataModule = {
  namespaced: true,
  
  state: () => ({
    datasets: [],
    currentDataset: null,
    analytics: {
      trends: [],
      categories: {},
      summary: {}
    },
    filters: {
      dateRange: {
        start: null,
        end: null
      },
      categories: [],
      searchQuery: ''
    },
    cache: new Map(),
    lastUpdated: null
  }),

  getters: {
    filteredData: state => {
      if (!state.currentDataset) return []
      
      let data = state.currentDataset.data
      
      // æ—¥æœŸéæ¿¾
      if (state.filters.dateRange.start && state.filters.dateRange.end) {
        data = data.filter(item => {
          const itemDate = new Date(item.date)
          return itemDate >= new Date(state.filters.dateRange.start) &&
                 itemDate <= new Date(state.filters.dateRange.end)
        })
      }
      
      // åˆ†é¡éæ¿¾
      if (state.filters.categories.length > 0) {
        data = data.filter(item => 
          state.filters.categories.includes(item.category)
        )
      }
      
      // æœç´¢éæ¿¾
      if (state.filters.searchQuery) {
        const query = state.filters.searchQuery.toLowerCase()
        data = data.filter(item =>
          item.name.toLowerCase().includes(query) ||
          item.description.toLowerCase().includes(query)
        )
      }
      
      return data
    },

    datasetById: state => id => {
      return state.datasets.find(dataset => dataset.id === id)
    },

    isDataStale: state => {
      if (!state.lastUpdated) return true
      const fiveMinutesAgo = Date.now() - 5 * 60 * 1000
      return state.lastUpdated < fiveMinutesAgo
    }
  },

  mutations: {
    SET_DATASETS(state, datasets) {
      state.datasets = datasets
      state.lastUpdated = Date.now()
    },
    
    SET_CURRENT_DATASET(state, dataset) {
      state.currentDataset = dataset
    },
    
    SET_ANALYTICS(state, analytics) {
      state.analytics = analytics
    },
    
    UPDATE_FILTERS(state, filters) {
      state.filters = { ...state.filters, ...filters }
    },
    
    CLEAR_FILTERS(state) {
      state.filters = {
        dateRange: { start: null, end: null },
        categories: [],
        searchQuery: ''
      }
    },
    
    SET_CACHE(state, { key, data }) {
      state.cache.set(key, {
        data,
        timestamp: Date.now()
      })
    },
    
    CLEAR_CACHE(state) {
      state.cache.clear()
    }
  },

  actions: {
    async fetchDatasets({ commit, state }) {
      const cacheKey = 'datasets'
      const cached = state.cache.get(cacheKey)
      
      // æª¢æŸ¥ç·©å­˜
      if (cached && (Date.now() - cached.timestamp) < 60000) {
        commit('SET_DATASETS', cached.data)
        return cached.data
      }
      
      try {
        const response = await api.get('/datasets')
        const datasets = response.data
        
        commit('SET_DATASETS', datasets)
        commit('SET_CACHE', { key: cacheKey, data: datasets })
        
        return datasets
        
      } catch (error) {
        console.error('Failed to fetch datasets:', error)
        throw error
      }
    },

    async loadDataset({ commit, dispatch }, datasetId) {
      try {
        const response = await api.get(`/datasets/${datasetId}`)
        const dataset = response.data
        
        commit('SET_CURRENT_DATASET', dataset)
        
        // è¼‰å…¥ç›¸é—œåˆ†ææ•¸æ“š
        await dispatch('loadAnalytics', datasetId)
        
        return dataset
        
      } catch (error) {
        console.error('Failed to load dataset:', error)
        throw error
      }
    },

    async loadAnalytics({ commit }, datasetId) {
      try {
        const response = await api.get(`/datasets/${datasetId}/analytics`)
        commit('SET_ANALYTICS', response.data)
        
      } catch (error) {
        console.error('Failed to load analytics:', error)
      }
    },

    async refreshData({ dispatch, getters }) {
      if (getters.isDataStale) {
        await dispatch('fetchDatasets')
      }
    }
  }
}

// åœ¨çµ„ä»¶ä¸­ä½¿ç”¨ (script setup)
<script setup>
import { computed } from 'vue'
import { useStore } from 'vuex'
import { useRouter } from 'vue-router'

const store = useStore()
const router = useRouter()

// è¨ˆç®—å±¬æ€§
const currentUser = computed(() => store.state.user.currentUser)
const loading = computed(() => store.state.user.loading)
const datasets = computed(() => store.state.data.datasets)
const analytics = computed(() => store.state.data.analytics)
const isAuthenticated = computed(() => store.getters['user/isAuthenticated'])
const activeUsers = computed(() => store.getters['user/activeUsers'])
const filteredData = computed(() => store.getters['data/filteredData'])

// æ–¹æ³•
const login = (credentials) => store.dispatch('user/login', credentials)
const fetchUsers = () => store.dispatch('user/fetchUsers')
const createUser = (userData) => store.dispatch('user/createUser', userData)
const fetchDatasets = () => store.dispatch('data/fetchDatasets')
const loadDataset = (datasetId) => store.dispatch('data/loadDataset', datasetId)

const handleLogin = async () => {
  const result = await login({
    username: username.value,
    password: password.value
  })
  
  if (result.success) {
    router.push('/dashboard')
  }
}

// ç”Ÿå‘½é€±æœŸ
onMounted(async () => {
  if (isAuthenticated.value) {
    await fetchDatasets()
  }
})
</script>

## å››ã€å°ˆæ¡ˆæ•´åˆèˆ‡æœ€ä½³å¯¦è¸

### (ä¸€) å°ˆæ¡ˆæ¶æ§‹è¨­è¨ˆ

å»ºç«‹ä¸€å€‹å®Œæ•´çš„å‰å¾Œç«¯åˆ†é›¢å°ˆæ¡ˆéœ€è¦è€ƒæ…®å¤šå€‹å±¤é¢çš„æ¶æ§‹è¨­è¨ˆï¼Œç¢ºä¿å¯ç¶­è­·æ€§ã€å¯æ“´å±•æ€§å’Œæ•ˆèƒ½ã€‚

#### 1. å‰ç«¯æ¶æ§‹è¨­è¨ˆ

| å±¤ç´š | è²¬ä»» | æŠ€è¡“é¸æ“‡ |
|------|------|----------|
| è¦–åœ–å±¤ | ç”¨æˆ¶ä»‹é¢å±•ç¤º | Vue çµ„ä»¶ã€CSS æ¡†æ¶ |
| ç‹€æ…‹å±¤ | æ•¸æ“šç‹€æ…‹ç®¡ç† | Vuex/Pinia |
| æœå‹™å±¤ | API èª¿ç”¨å°è£ | Axiosã€HTTP å®¢æˆ¶ç«¯ |
| å·¥å…·å±¤ | é€šç”¨å·¥å…·å‡½æ•¸ | Utilsã€Helpers |
| é…ç½®å±¤ | ç’°å¢ƒé…ç½® | ç’°å¢ƒè®Šæ•¸ã€é…ç½®æ–‡ä»¶ |

#### 2. å¾Œç«¯æ¶æ§‹è¨­è¨ˆ

| å±¤ç´š | è²¬ä»» | æŠ€è¡“é¸æ“‡ |
|------|------|----------|
| æ§åˆ¶å±¤ | è«‹æ±‚è™•ç† | Flask è·¯ç”±ã€æ§åˆ¶å™¨ |
| æœå‹™å±¤ | æ¥­å‹™é‚è¼¯ | Service é¡ |
| æ•¸æ“šå±¤ | æ•¸æ“šå­˜å– | SQLAlchemyã€Repository |
| ä¸­é–“ä»¶ | æ©«åˆ‡é—œæ³¨é» | èªè­‰ã€æ—¥èªŒã€CORS |
| é…ç½®å±¤ | æ‡‰ç”¨é…ç½® | Config é¡ã€ç’°å¢ƒè¨­å®š |

#### 3. å°ˆæ¡ˆç›®éŒ„çµæ§‹

```
project/
â”œâ”€â”€ frontend/                    # å‰ç«¯å°ˆæ¡ˆ
â”‚   â”œâ”€â”€ public/                 # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ assets/            # è³‡æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ components/        # å¯é‡ç”¨çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common/        # é€šç”¨çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ charts/        # åœ–è¡¨çµ„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ forms/         # è¡¨å–®çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/             # é é¢çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/             # ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ modules/       # Vuex æ¨¡çµ„
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ services/          # API æœå‹™
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ plugins/           # æ’ä»¶é…ç½®
â”‚   â”‚   â””â”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ tests/                 # æ¸¬è©¦æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vue.config.js
â”œâ”€â”€ backend/                    # å¾Œç«¯å°ˆæ¡ˆ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py        # æ‡‰ç”¨åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ models/            # æ•¸æ“šæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ views/             # è¦–åœ–/æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ services/          # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ middleware/        # ä¸­é–“ä»¶
â”‚   â”‚   â””â”€â”€ config.py          # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ migrations/            # æ•¸æ“šåº«é·ç§»
â”‚   â”œâ”€â”€ tests/                 # æ¸¬è©¦æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt       # ä¾è³´åˆ—è¡¨
â”‚   â””â”€â”€ run.py                 # å•Ÿå‹•æ–‡ä»¶
â”œâ”€â”€ database/                   # æ•¸æ“šåº«ç›¸é—œ
â”‚   â”œâ”€â”€ seeds/                 # ç¨®å­æ•¸æ“š
â”‚   â””â”€â”€ schema.sql             # æ•¸æ“šåº«çµæ§‹
â”œâ”€â”€ docs/                      # æ–‡æª”
â”œâ”€â”€ docker-compose.yml         # Docker é…ç½®
â””â”€â”€ README.md                  # å°ˆæ¡ˆèªªæ˜
```

### (äºŒ) é–‹ç™¼å·¥ä½œæµç¨‹

#### 1. é–‹ç™¼ç’°å¢ƒè¨­ç½®

```bash
# å¾Œç«¯ç’°å¢ƒè¨­ç½®
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# æ•¸æ“šåº«è¨­ç½®
flask db init
flask db migrate -m "Initial migration"
flask db upgrade

# å‰ç«¯ç’°å¢ƒè¨­ç½®
cd frontend
npm install
npm run serve

# Docker ç’°å¢ƒï¼ˆå¯é¸ï¼‰
docker-compose up -d
```

#### 2. é–‹ç™¼å·¥ä½œæµ

| éšæ®µ | ä»»å‹™ | å·¥å…· |
|------|------|------|
| è¦åŠƒ | éœ€æ±‚åˆ†æã€API è¨­è¨ˆ | Swaggerã€Postman |
| é–‹ç™¼ | ç·¨ç¢¼å¯¦ç¾ | IDEã€Git |
| æ¸¬è©¦ | å–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦ | Jestã€PyTest |
| éƒ¨ç½² | å»ºæ§‹ã€éƒ¨ç½² | Dockerã€CI/CD |
| ç›£æ§ | æ•ˆèƒ½ç›£æ§ã€éŒ¯èª¤è¿½è¹¤ | æ—¥èªŒã€ç›£æ§å·¥å…· |

### (ä¸‰) æ•ˆèƒ½å„ªåŒ–ç­–ç•¥

#### 1. å‰ç«¯å„ªåŒ–

| ç­–ç•¥ | å¯¦ç¾æ–¹å¼ | æ•ˆæœ |
|------|----------|------|
| ç¨‹å¼ç¢¼åˆ†å‰² | å‹•æ…‹ import | æ¸›å°‘åˆå§‹è¼‰å…¥æ™‚é–“ |
| æ‡¶è¼‰å…¥ | Vue è·¯ç”±æ‡¶è¼‰å…¥ | æŒ‰éœ€è¼‰å…¥ |
| ç·©å­˜ç­–ç•¥ | HTTP ç·©å­˜ã€æœ¬åœ°å­˜å„² | æ¸›å°‘ç¶²è·¯è«‹æ±‚ |
| åœ–ç‰‡å„ªåŒ– | WebPã€å£“ç¸® | æ¸›å°‘æª”æ¡ˆå¤§å° |
| CDN | éœæ…‹è³‡æº CDN | åŠ é€Ÿè³‡æºè¼‰å…¥ |

```javascript
// å‰ç«¯æ•ˆèƒ½å„ªåŒ–ç¯„ä¾‹
// 1. è·¯ç”±æ‡¶è¼‰å…¥
const routes = [
  {
    path: '/dashboard',
    component: () => import('@/views/Dashboard.vue')
  },
  {
    path: '/analytics',
    component: () => import('@/views/Analytics.vue')
  }
]

// 2. çµ„ä»¶æ‡¶è¼‰å…¥ (script setup)
<script setup>
import { defineAsyncComponent } from 'vue'

const DataChart = defineAsyncComponent(() => 
  import('@/components/charts/DataChart.vue')
)
</script>

// 3. è«‹æ±‚ç·©å­˜
class CacheService {
  constructor() {
    this.cache = new Map()
    this.maxAge = 5 * 60 * 1000 // 5åˆ†é˜
  }

  get(key) {
    const item = this.cache.get(key)
    if (item && Date.now() - item.timestamp < this.maxAge) {
      return item.data
    }
    return null
  }

  set(key, data) {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    })
  }
}

// 4. è™›æ“¬æ»¾å‹•ï¼ˆå¤§åˆ—è¡¨å„ªåŒ–ï¼‰
<script setup>
import { RecycleScroller } from 'vue-virtual-scroller'

defineProps({
  items: {
    type: Array,
    required: true
  }
})
</script>

<template>
  <RecycleScroller
    class="scroller"
    :items="items"
    :item-size="60"
    key-field="id"
    v-slot="{ item }"
  >
    <div class="item">{{ item.name }}</div>
  </RecycleScroller>
</template>
```

#### 2. å¾Œç«¯å„ªåŒ–

| ç­–ç•¥ | å¯¦ç¾æ–¹å¼ | æ•ˆæœ |
|------|----------|------|
| æ•¸æ“šåº«å„ªåŒ– | ç´¢å¼•ã€æŸ¥è©¢å„ªåŒ– | æå‡æŸ¥è©¢é€Ÿåº¦ |
| ç·©å­˜ | Redisã€è¨˜æ†¶é«”ç·©å­˜ | æ¸›å°‘æ•¸æ“šåº«å£“åŠ› |
| åˆ†é  | Limit/Offset | æ¸›å°‘æ•¸æ“šå‚³è¼¸ |
| å£“ç¸® | Gzip å£“ç¸® | æ¸›å°‘ç¶²è·¯å‚³è¼¸ |
| éåŒæ­¥è™•ç† | Celeryã€ä»»å‹™ä½‡åˆ— | æå‡å›æ‡‰é€Ÿåº¦ |

```python
# å¾Œç«¯æ•ˆèƒ½å„ªåŒ–ç¯„ä¾‹
from flask import Flask
from flask_caching import Cache
from flask_compress import Compress
import redis

app = Flask(__name__)

# 1. å•Ÿç”¨å£“ç¸®
Compress(app)

# 2. è¨­ç½®ç·©å­˜
app.config['CACHE_TYPE'] = 'redis'
app.config['CACHE_REDIS_URL'] = 'redis://localhost:6379/0'
cache = Cache(app)

# 3. æ•¸æ“šåº«æŸ¥è©¢å„ªåŒ–
class UserService:
    @staticmethod
    @cache.memoize(timeout=300)  # ç·©å­˜5åˆ†é˜
    def get_user_stats():
        """ç²å–ç”¨æˆ¶çµ±è¨ˆä¿¡æ¯ï¼ˆå¸¶ç·©å­˜ï¼‰"""
        return db.session.query(
            func.count(User.id).label('total_users'),
            func.count(case([(User.is_active == True, 1)])).label('active_users')
        ).first()

    @staticmethod
    def get_users_paginated(page=1, per_page=20, search=None):
        """åˆ†é ç²å–ç”¨æˆ¶"""
        query = User.query
        
        if search:
            query = query.filter(
                or_(
                    User.username.ilike(f'%{search}%'),
                    User.email.ilike(f'%{search}%')
                )
            )
        
        # æ·»åŠ ç´¢å¼•ä»¥å„ªåŒ–æŸ¥è©¢
        query = query.order_by(User.created_at.desc())
        
        return query.paginate(
            page=page,
            per_page=per_page,
            error_out=False
        )

# 4. éåŒæ­¥ä»»å‹™è™•ç†
from celery import Celery

celery = Celery('app', broker='redis://localhost:6379/0')

@celery.task
def process_large_dataset(dataset_id):
    """éåŒæ­¥è™•ç†å¤§å‹æ•¸æ“šé›†"""
    # é•·æ™‚é–“é‹è¡Œçš„ä»»å‹™
    pass

@app.route('/api/process-data', methods=['POST'])
def trigger_data_processing():
    data = request.get_json()
    task = process_large_dataset.delay(data['dataset_id'])
    return jsonify({'task_id': task.id})
```

### (å››) å®‰å…¨æ€§è€ƒé‡

#### 1. å‰ç«¯å®‰å…¨

| å¨è„… | é˜²è­·æªæ–½ | å¯¦ç¾æ–¹å¼ |
|------|----------|----------|
| XSS æ”»æ“Š | è¼¸å…¥éæ¿¾ã€CSP | Vue å…§å»ºé˜²è­·ã€CSP æ¨™é ­ |
| CSRF æ”»æ“Š | CSRF Token | è«‹æ±‚æ¨™é ­é©—è­‰ |
| æ•æ„Ÿæ•¸æ“šæ´©éœ² | ä¸å­˜å„²æ•æ„Ÿä¿¡æ¯ | ç§»é™¤ console.log |
| ä¾è³´æ¼æ´ | å®šæœŸæ›´æ–° | npm audit |

#### 2. å¾Œç«¯å®‰å…¨

| å¨è„… | é˜²è­·æªæ–½ | å¯¦ç¾æ–¹å¼ |
|------|----------|----------|
| SQL æ³¨å…¥ | åƒæ•¸åŒ–æŸ¥è©¢ | SQLAlchemy ORM |
| èªè­‰ç¹é | å¼·èªè­‰æ©Ÿåˆ¶ | JWTã€å¤šå› ç´ èªè­‰ |
| æ¬Šé™æå‡ | æœ€å°æ¬Šé™åŸå‰‡ | RBAC æ¬Šé™æ§åˆ¶ |
| æ•¸æ“šæ´©éœ² | åŠ å¯†å­˜å„² | å¯†ç¢¼é›œæ¹Šã€æ•¸æ“šåŠ å¯† |

```python
# å®‰å…¨æ€§å¯¦ç¾ç¯„ä¾‹
from werkzeug.security import generate_password_hash, check_password_hash
from flask_jwt_extended import create_access_token, jwt_required, get_jwt_identity
import secrets

class SecurityService:
    @staticmethod
    def hash_password(password):
        """å¯†ç¢¼é›œæ¹Š"""
        return generate_password_hash(password, method='pbkdf2:sha256')
    
    @staticmethod
    def verify_password(password, password_hash):
        """å¯†ç¢¼é©—è­‰"""
        return check_password_hash(password_hash, password)
    
    @staticmethod
    def generate_token(user_id, expires_delta=None):
        """ç”Ÿæˆ JWT Token"""
        additional_claims = {"user_id": user_id}
        return create_access_token(
            identity=user_id,
            additional_claims=additional_claims,
            expires_delta=expires_delta
        )

# æ¬Šé™è£é£¾å™¨
from functools import wraps

def require_permission(permission):
    def decorator(f):
        @wraps(f)
        @jwt_required()
        def decorated_function(*args, **kwargs):
            current_user_id = get_jwt_identity()
            if not UserService.has_permission(current_user_id, permission):
                return jsonify({'error': 'Insufficient permissions'}), 403
            return f(*args, **kwargs)
        return decorated_function
    return decorator

@app.route('/api/admin/users')
@require_permission('admin:users:read')
def admin_get_users():
    """éœ€è¦ç®¡ç†å“¡æ¬Šé™çš„ç«¯é»"""
    pass
```

### (äº”) æ¸¬è©¦ç­–ç•¥

#### 1. æ¸¬è©¦é¡å‹

| æ¸¬è©¦é¡å‹ | ç¯„åœ | å·¥å…· |
|----------|------|------|
| å–®å…ƒæ¸¬è©¦ | å–®å€‹å‡½æ•¸/æ–¹æ³• | Jestã€PyTest |
| æ•´åˆæ¸¬è©¦ | æ¨¡çµ„é–“æ•´åˆ | Vue Test Utilsã€Flask-Testing |
| E2E æ¸¬è©¦ | å®Œæ•´ç”¨æˆ¶æµç¨‹ | Cypressã€Selenium |
| API æ¸¬è©¦ | API ç«¯é» | Postmanã€Insomnia |

#### 2. æ¸¬è©¦ç¯„ä¾‹

```javascript
// å‰ç«¯æ¸¬è©¦ç¯„ä¾‹
import { mount } from '@vue/test-utils'
import UserList from '@/components/UserList.vue'

describe('UserList.vue', () => {
  test('displays users correctly', async () => {
    const users = [
      { id: 1, name: 'John', email: 'john@example.com' },
      { id: 2, name: 'Jane', email: 'jane@example.com' }
    ]
    
    const wrapper = mount(UserList, {
      props: { users }
    })
    
    expect(wrapper.findAll('.user-item')).toHaveLength(2)
    expect(wrapper.text()).toContain('John')
    expect(wrapper.text()).toContain('jane@example.com')
  })
})
```

```python
# å¾Œç«¯æ¸¬è©¦ç¯„ä¾‹
import pytest
from app import create_app, db
from app.models import User

@pytest.fixture
def app():
    app = create_app('testing')
    with app.app_context():
        db.create_all()
        yield app
        db.drop_all()

@pytest.fixture
def client(app):
    return app.test_client()

def test_create_user(client):
    """æ¸¬è©¦ç”¨æˆ¶å‰µå»º"""
    response = client.post('/api/users', json={
        'username': 'testuser',
        'email': 'test@example.com'
    })
    
    assert response.status_code == 201
    data = response.get_json()
    assert data['username'] == 'testuser'
    assert data['email'] == 'test@example.com'

def test_get_users(client):
    """æ¸¬è©¦ç”¨æˆ¶åˆ—è¡¨ç²å–"""
    # å…ˆå‰µå»ºä¸€äº›æ¸¬è©¦æ•¸æ“š
    user1 = User(username='user1', email='user1@example.com')
    user2 = User(username='user2', email='user2@example.com')
    db.session.add_all([user1, user2])
    db.session.commit()
    
    response = client.get('/api/users')
    
    assert response.status_code == 200
    data = response.get_json()
    assert len(data['users']) == 2
```

### (å…­) éƒ¨ç½²èˆ‡ç¶­è­·

#### 1. éƒ¨ç½²ç­–ç•¥

| ç’°å¢ƒ | ç›®çš„ | é…ç½® |
|------|------|------|
| é–‹ç™¼ç’°å¢ƒ | æ—¥å¸¸é–‹ç™¼ | å®Œæ•´æ—¥èªŒã€èª¿è©¦æ¨¡å¼ |
| æ¸¬è©¦ç’°å¢ƒ | åŠŸèƒ½æ¸¬è©¦ | æ¨¡æ“¬ç”Ÿç”¢æ•¸æ“š |
| é ç™¼ç’°å¢ƒ | ä¸Šç·šå‰é©—è­‰ | ç”Ÿç”¢é…ç½® |
| ç”Ÿç”¢ç’°å¢ƒ | ç”¨æˆ¶ä½¿ç”¨ | é«˜å¯ç”¨ã€ç›£æ§ |

#### 2. Docker éƒ¨ç½²

```dockerfile
# å‰ç«¯ Dockerfile
FROM node:16-alpine as build
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

```dockerfile
# å¾Œç«¯ Dockerfile
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
EXPOSE 5000
CMD ["gunicorn", "--bind", "0.0.0.0:5000", "run:app"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "3000:80"
    depends_on:
      - backend

  backend:
    build: ./backend
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/myapp
    depends_on:
      - db
      - redis

  db:
    image: postgres:13
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:6-alpine
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

## ä¸‰ã€å­¸ç¿’é€²éšæŒ‡å—

### (ä¸€) å­¸ç¿’éšæ®µè¦åŠƒ

**ğŸ¯ é€²éšé–‹ç™¼è€…è·¯å¾‘ï¼ˆ8-12é€±ï¼‰**

**ç¬¬1-2é€±ï¼šVue.js åŸºç¤èˆ‡çµ„ä»¶é–‹ç™¼**
- ğŸš€ **æ¡†æ¶å…¥é–€**ï¼šVue 3 åŸºç¤æ¦‚å¿µã€éŸ¿æ‡‰å¼åŸç†
- ğŸ§© **çµ„ä»¶ç³»çµ±**ï¼šå–®æ–‡ä»¶çµ„ä»¶ã€çµ„ä»¶é€šä¿¡
- ğŸ¨ **æ¨¡æ¿èªæ³•**ï¼šæŒ‡ä»¤ç³»çµ±ã€äº‹ä»¶è™•ç†
- ğŸ’¡ **å¯¦ä½œç›®æ¨™**ï¼šå»ºç«‹äº’å‹•å¼å¾…è¾¦äº‹é …æ‡‰ç”¨

```vue
<!-- ğŸ’¡ ç¬¬1é€±å¯¦ä½œï¼šäº’å‹•å¼å¾…è¾¦äº‹é …æ‡‰ç”¨ -->
<template>
  <div class="todo-app">
    <header class="app-header">
      <h1>ğŸ“ æˆ‘çš„å¾…è¾¦äº‹é …</h1>
      <div class="stats">
        <span>ç¸½è¨ˆ: {{ todos.length }}</span>
        <span>å·²å®Œæˆ: {{ completedCount }}</span>
        <span>å‰©é¤˜: {{ remainingCount }}</span>
      </div>
    </header>

    <div class="todo-input">
      <input
        v-model="newTodo"
        @keyup.enter="addTodo"
        placeholder="è¼¸å…¥æ–°çš„å¾…è¾¦äº‹é …..."
        class="todo-field"
      >
      <button @click="addTodo" :disabled="!newTodo.trim()" class="add-btn">
        â• æ–°å¢
      </button>
    </div>

    <div class="filters">
      <button
        v-for="filter in filters"
        :key="filter.key"
        @click="currentFilter = filter.key"
        :class="{ active: currentFilter === filter.key }"
        class="filter-btn"
      >
        {{ filter.label }}
      </button>
    </div>

    <div class="todo-list">
      <TransitionGroup name="todo" tag="div">
        <TodoItem
          v-for="todo in filteredTodos"
          :key="todo.id"
          :todo="todo"
          @toggle="toggleTodo"
          @edit="editTodo"
          @delete="deleteTodo"
        />
      </TransitionGroup>
    </div>

    <div class="todo-actions" v-if="todos.length > 0">
      <button @click="clearCompleted" v-if="completedCount > 0" class="clear-btn">
        ğŸ—‘ï¸ æ¸…é™¤å·²å®Œæˆ ({{ completedCount }})
      </button>
      <button @click="toggleAll" class="toggle-all-btn">
        {{ allCompleted ? 'å–æ¶ˆå…¨é¸' : 'å…¨éƒ¨å®Œæˆ' }}
      </button>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, watch } from 'vue'
import TodoItem from './components/TodoItem.vue'

// éŸ¿æ‡‰å¼æ•¸æ“š
const newTodo = ref('')
const currentFilter = ref('all')
const todos = ref([
  { id: 1, text: 'å­¸ç¿’ Vue 3 åŸºç¤', completed: false, priority: 'high', createdAt: new Date() },
  { id: 2, text: 'å»ºç«‹ç¬¬ä¸€å€‹çµ„ä»¶', completed: true, priority: 'medium', createdAt: new Date() },
  { id: 3, text: 'ç†è§£éŸ¿æ‡‰å¼åŸç†', completed: false, priority: 'high', createdAt: new Date() }
])

// éæ¿¾å™¨é¸é …
const filters = [
  { key: 'all', label: 'å…¨éƒ¨' },
  { key: 'active', label: 'æœªå®Œæˆ' },
  { key: 'completed', label: 'å·²å®Œæˆ' }
]

// è¨ˆç®—å±¬æ€§
const completedCount = computed(() => todos.value.filter(todo => todo.completed).length)
const remainingCount = computed(() => todos.value.length - completedCount.value)
const allCompleted = computed(() => todos.value.length > 0 && completedCount.value === todos.value.length)

const filteredTodos = computed(() => {
  switch (currentFilter.value) {
    case 'active':
      return todos.value.filter(todo => !todo.completed)
    case 'completed':
      return todos.value.filter(todo => todo.completed)
    default:
      return todos.value
  }
})

// æ–¹æ³•
const addTodo = () => {
  const text = newTodo.value.trim()
  if (text) {
    todos.value.push({
      id: Date.now(),
      text,
      completed: false,
      priority: 'medium',
      createdAt: new Date()
    })
    newTodo.value = ''
  }
}

const toggleTodo = (id) => {
  const todo = todos.value.find(t => t.id === id)
  if (todo) {
    todo.completed = !todo.completed
  }
}

const editTodo = (id, newText) => {
  const todo = todos.value.find(t => t.id === id)
  if (todo) {
    todo.text = newText
  }
}

const deleteTodo = (id) => {
  const index = todos.value.findIndex(t => t.id === id)
  if (index > -1) {
    todos.value.splice(index, 1)
  }
}

const clearCompleted = () => {
  todos.value = todos.value.filter(todo => !todo.completed)
}

const toggleAll = () => {
  const targetState = !allCompleted.value
  todos.value.forEach(todo => {
    todo.completed = targetState
  })
}

// ç›£è½å™¨ - æœ¬åœ°å„²å­˜
watch(todos, (newTodos) => {
  localStorage.setItem('todos', JSON.stringify(newTodos))
}, { deep: true })

// è¼‰å…¥æœ¬åœ°è³‡æ–™
const loadTodos = () => {
  const saved = localStorage.getItem('todos')
  if (saved) {
    todos.value = JSON.parse(saved)
  }
}

// åˆå§‹åŒ–
loadTodos()
</script>

<style scoped>
.todo-app {
  max-width: 600px;
  margin: 0 auto;
  padding: 20px;
  font-family: 'Arial', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
}

.app-header {
  text-align: center;
  margin-bottom: 30px;
}

.app-header h1 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.stats {
  display: flex;
  justify-content: center;
  gap: 20px;
  font-size: 14px;
  color: #7f8c8d;
}

.todo-input {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.todo-field {
  flex: 1;
  padding: 12px;
  border: 2px solid #ecf0f1;
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.3s;
}

.todo-field:focus {
  outline: none;
  border-color: #3498db;
}

.add-btn {
  padding: 12px 20px;
  background: #3498db;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  transition: background-color 0.3s;
}

.add-btn:hover:not(:disabled) {
  background: #2980b9;
}

.add-btn:disabled {
  background: #bdc3c7;
  cursor: not-allowed;
}

.filters {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
}

.filter-btn {
  padding: 8px 16px;
  border: 2px solid #ecf0f1;
  background: white;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s;
}

.filter-btn.active {
  background: #3498db;
  color: white;
  border-color: #3498db;
}

.todo-list {
  min-height: 200px;
}

.todo-actions {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
  gap: 10px;
}

.clear-btn, .toggle-all-btn {
  padding: 10px 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: background-color 0.3s;
}

.clear-btn {
  background: #e74c3c;
  color: white;
}

.clear-btn:hover {
  background: #c0392b;
}

.toggle-all-btn {
  background: #2ecc71;
  color: white;
}

.toggle-all-btn:hover {
  background: #27ae60;
}

/* å‹•ç•«æ•ˆæœ */
.todo-enter-active, .todo-leave-active {
  transition: all 0.3s ease;
}

.todo-enter-from {
  opacity: 0;
  transform: translateY(-20px);
}

.todo-leave-to {
  opacity: 0;
  transform: translateX(20px);
}

@media (max-width: 768px) {
  .todo-app {
    padding: 10px;
  }
  
  .stats {
    flex-direction: column;
    gap: 5px;
  }
  
  .todo-input {
    flex-direction: column;
  }
  
  .filters {
    flex-wrap: wrap;
  }
  
  .todo-actions {
    flex-direction: column;
  }
}
</style>
```

**ç¬¬3-4é€±ï¼šFlask åŸºç¤èˆ‡ API é–‹ç™¼**
- ğŸ **æ¡†æ¶å…¥é–€**ï¼šFlask åŸºç¤æ¦‚å¿µã€è·¯ç”±ç³»çµ±
- ğŸ› ï¸ **API è¨­è¨ˆ**ï¼šRESTful API é–‹ç™¼è¦ç¯„
- ğŸ—ƒï¸ **è³‡æ–™åº«æ•´åˆ**ï¼šSQLAlchemy ORM ä½¿ç”¨
- ğŸ’¡ **å¯¦ä½œç›®æ¨™**ï¼šå»ºç«‹å¾…è¾¦äº‹é … API å¾Œç«¯

```python
# ğŸ’¡ ç¬¬3é€±å¯¦ä½œï¼šå¾…è¾¦äº‹é … API å¾Œç«¯
from flask import Flask, request, jsonify
from flask_sqlalchemy import SQLAlchemy
from flask_cors import CORS
from datetime import datetime
import os
from werkzeug.exceptions import BadRequest, NotFound
import logging

# æ‡‰ç”¨ç¨‹å¼è¨­å®š
app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = os.environ.get('DATABASE_URL', 'sqlite:///todos.db')
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
app.config['SECRET_KEY'] = os.environ.get('SECRET_KEY', 'dev-secret-key')

# æ“´å±•åˆå§‹åŒ–
db = SQLAlchemy(app)
CORS(app)

# è¨­å®šæ—¥èªŒ
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# è³‡æ–™æ¨¡å‹
class Todo(db.Model):
    """å¾…è¾¦äº‹é …æ¨¡å‹"""
    id = db.Column(db.Integer, primary_key=True)
    text = db.Column(db.String(200), nullable=False)
    completed = db.Column(db.Boolean, default=False, nullable=False)
    priority = db.Column(db.String(10), default='medium', nullable=False)
    created_at = db.Column(db.DateTime, default=datetime.utcnow, nullable=False)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    due_date = db.Column(db.DateTime, nullable=True)
    category = db.Column(db.String(50), default='general')
    
    def to_dict(self):
        """è½‰æ›ç‚ºå­—å…¸æ ¼å¼"""
        return {
            'id': self.id,
            'text': self.text,
            'completed': self.completed,
            'priority': self.priority,
            'created_at': self.created_at.isoformat() if self.created_at else None,
            'updated_at': self.updated_at.isoformat() if self.updated_at else None,
            'due_date': self.due_date.isoformat() if self.due_date else None,
            'category': self.category
        }
    
    def __repr__(self):
        return f'<Todo {self.id}: {self.text[:20]}...>'

class Category(db.Model):
    """åˆ†é¡æ¨¡å‹"""
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50), unique=True, nullable=False)
    color = db.Column(db.String(7), default='#3498db')  # åå…­é€²ä½é¡è‰²ç¢¼
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    
    def to_dict(self):
        return {
            'id': self.id,
            'name': self.name,
            'color': self.color,
            'created_at': self.created_at.isoformat() if self.created_at else None
        }

# å»ºç«‹è³‡æ–™è¡¨
with app.app_context():
    db.create_all()
    
    # å»ºç«‹é è¨­åˆ†é¡
    if not Category.query.first():
        default_categories = [
            Category(name='å·¥ä½œ', color='#e74c3c'),
            Category(name='å­¸ç¿’', color='#3498db'),
            Category(name='ç”Ÿæ´»', color='#2ecc71'),
            Category(name='å…¶ä»–', color='#95a5a6')
        ]
        for category in default_categories:
            db.session.add(category)
        db.session.commit()
        logger.info("å»ºç«‹é è¨­åˆ†é¡")

# éŒ¯èª¤è™•ç†
@app.errorhandler(BadRequest)
def handle_bad_request(e):
    return jsonify({'error': 'è«‹æ±‚æ ¼å¼éŒ¯èª¤', 'message': str(e)}), 400

@app.errorhandler(NotFound)
def handle_not_found(e):
    return jsonify({'error': 'è³‡æºä¸å­˜åœ¨', 'message': str(e)}), 404

@app.errorhandler(500)
def handle_internal_error(e):
    logger.error(f"å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤: {str(e)}")
    return jsonify({'error': 'å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤'}), 500

# è¼”åŠ©å‡½æ•¸
def validate_todo_data(data):
    """é©—è­‰å¾…è¾¦äº‹é …è³‡æ–™"""
    if not data:
        raise BadRequest("è«‹æ±‚å…§å®¹ä¸èƒ½ç‚ºç©º")
    
    if not data.get('text', '').strip():
        raise BadRequest("å¾…è¾¦äº‹é …å…§å®¹ä¸èƒ½ç‚ºç©º")
    
    if len(data.get('text', '')) > 200:
        raise BadRequest("å¾…è¾¦äº‹é …å…§å®¹ä¸èƒ½è¶…é200å­—å…ƒ")
    
    valid_priorities = ['low', 'medium', 'high']
    if data.get('priority') and data.get('priority') not in valid_priorities:
        raise BadRequest(f"å„ªå…ˆç´šå¿…é ˆæ˜¯ä»¥ä¸‹ä¹‹ä¸€: {', '.join(valid_priorities)}")
    
    return True

# API è·¯ç”±
@app.route('/api/health', methods=['GET'])
def health_check():
    """å¥åº·æª¢æŸ¥"""
    return jsonify({
        'status': 'healthy',
        'timestamp': datetime.utcnow().isoformat(),
        'version': '1.0.0'
    })

@app.route('/api/todos', methods=['GET'])
def get_todos():
    """ç²å–æ‰€æœ‰å¾…è¾¦äº‹é …"""
    try:
        # æŸ¥è©¢åƒæ•¸
        page = request.args.get('page', 1, type=int)
        per_page = min(request.args.get('per_page', 10, type=int), 100)  # é™åˆ¶æœ€å¤§æ•¸é‡
        completed = request.args.get('completed')
        priority = request.args.get('priority')
        category = request.args.get('category')
        search = request.args.get('search')
        
        # å»ºç«‹æŸ¥è©¢
        query = Todo.query
        
        # ç¯©é¸æ¢ä»¶
        if completed is not None:
            completed_bool = completed.lower() in ['true', '1', 'yes']
            query = query.filter(Todo.completed == completed_bool)
        
        if priority:
            query = query.filter(Todo.priority == priority)
        
        if category:
            query = query.filter(Todo.category == category)
        
        if search:
            query = query.filter(Todo.text.contains(search))
        
        # æ’åºå’Œåˆ†é 
        query = query.order_by(Todo.created_at.desc())
        pagination = query.paginate(page=page, per_page=per_page, error_out=False)
        
        # çµ±è¨ˆè³‡è¨Š
        stats = {
            'total': Todo.query.count(),
            'completed': Todo.query.filter(Todo.completed == True).count(),
            'pending': Todo.query.filter(Todo.completed == False).count(),
            'high_priority': Todo.query.filter(Todo.priority == 'high').count()
        }
        
        return jsonify({
            'todos': [todo.to_dict() for todo in pagination.items],
            'pagination': {
                'page': page,
                'per_page': per_page,
                'total': pagination.total,
                'pages': pagination.pages,
                'has_next': pagination.has_next,
                'has_prev': pagination.has_prev
            },
            'stats': stats
        })
        
    except Exception as e:
        logger.error(f"ç²å–å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤: {str(e)}")
        return jsonify({'error': 'ç²å–è³‡æ–™å¤±æ•—'}), 500

@app.route('/api/todos', methods=['POST'])
def create_todo():
    """å»ºç«‹æ–°çš„å¾…è¾¦äº‹é …"""
    try:
        data = request.get_json()
        validate_todo_data(data)
        
        # è§£æåˆ°æœŸæ—¥æœŸ
        due_date = None
        if data.get('due_date'):
            try:
                due_date = datetime.fromisoformat(data['due_date'].replace('Z', '+00:00'))
            except ValueError:
                raise BadRequest("åˆ°æœŸæ—¥æœŸæ ¼å¼éŒ¯èª¤")
        
        todo = Todo(
            text=data['text'].strip(),
            priority=data.get('priority', 'medium'),
            due_date=due_date,
            category=data.get('category', 'general')
        )
        
        db.session.add(todo)
        db.session.commit()
        
        logger.info(f"å»ºç«‹æ–°å¾…è¾¦äº‹é …: {todo.id}")
        return jsonify(todo.to_dict()), 201
        
    except BadRequest:
        raise
    except Exception as e:
        db.session.rollback()
        logger.error(f"å»ºç«‹å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤: {str(e)}")
        return jsonify({'error': 'å»ºç«‹å¤±æ•—'}), 500

@app.route('/api/todos/<int:todo_id>', methods=['GET'])
def get_todo(todo_id):
    """ç²å–ç‰¹å®šå¾…è¾¦äº‹é …"""
    todo = Todo.query.get_or_404(todo_id)
    return jsonify(todo.to_dict())

@app.route('/api/todos/<int:todo_id>', methods=['PUT'])
def update_todo(todo_id):
    """æ›´æ–°å¾…è¾¦äº‹é …"""
    try:
        todo = Todo.query.get_or_404(todo_id)
        data = request.get_json()
        
        if not data:
            raise BadRequest("è«‹æ±‚å…§å®¹ä¸èƒ½ç‚ºç©º")
        
        # æ›´æ–°æ¬„ä½
        if 'text' in data:
            if not data['text'].strip():
                raise BadRequest("å¾…è¾¦äº‹é …å…§å®¹ä¸èƒ½ç‚ºç©º")
            todo.text = data['text'].strip()
        
        if 'completed' in data:
            todo.completed = bool(data['completed'])
        
        if 'priority' in data:
            valid_priorities = ['low', 'medium', 'high']
            if data['priority'] not in valid_priorities:
                raise BadRequest(f"å„ªå…ˆç´šå¿…é ˆæ˜¯ä»¥ä¸‹ä¹‹ä¸€: {', '.join(valid_priorities)}")
            todo.priority = data['priority']
        
        if 'due_date' in data:
            if data['due_date']:
                try:
                    todo.due_date = datetime.fromisoformat(data['due_date'].replace('Z', '+00:00'))
                except ValueError:
                    raise BadRequest("åˆ°æœŸæ—¥æœŸæ ¼å¼éŒ¯èª¤")
            else:
                todo.due_date = None
        
        if 'category' in data:
            todo.category = data['category']
        
        todo.updated_at = datetime.utcnow()
        db.session.commit()
        
        logger.info(f"æ›´æ–°å¾…è¾¦äº‹é …: {todo.id}")
        return jsonify(todo.to_dict())
        
    except BadRequest:
        raise
    except Exception as e:
        db.session.rollback()
        logger.error(f"æ›´æ–°å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤: {str(e)}")
        return jsonify({'error': 'æ›´æ–°å¤±æ•—'}), 500

@app.route('/api/todos/<int:todo_id>', methods=['DELETE'])
def delete_todo(todo_id):
    """åˆªé™¤å¾…è¾¦äº‹é …"""
    try:
        todo = Todo.query.get_or_404(todo_id)
        db.session.delete(todo)
        db.session.commit()
        
        logger.info(f"åˆªé™¤å¾…è¾¦äº‹é …: {todo_id}")
        return '', 204
        
    except Exception as e:
        db.session.rollback()
        logger.error(f"åˆªé™¤å¾…è¾¦äº‹é …æ™‚ç™¼ç”ŸéŒ¯èª¤: {str(e)}")
        return jsonify({'error': 'åˆªé™¤å¤±æ•—'}), 500

@app.route('/api/todos/bulk', methods=['PATCH'])
def bulk_update_todos():
    """æ‰¹é‡æ›´æ–°å¾…è¾¦äº‹é …"""
    try:
        data = request.get_json()
        if not data or 'action' not in data:
            raise BadRequest("ç¼ºå°‘å¿…è¦åƒæ•¸")
        
        action = data['action']
        todo_ids = data.get('todo_ids', [])
        
        if not todo_ids:
            raise BadRequest("æ²’æœ‰æŒ‡å®šè¦æ“ä½œçš„å¾…è¾¦äº‹é …")
        
        todos = Todo.query.filter(Todo.id.in_(todo_ids)).all()
        
        if action == 'complete':
            for todo in todos:
                todo.completed = True
                todo.updated_at = datetime.utcnow()
        elif action == 'uncomplete':
            for todo in todos:
                todo.completed = False
                todo.updated_at = datetime.utcnow()
        elif action == 'delete':
            for todo in todos:
                db.session.delete(todo)
        else:
            raise BadRequest("ç„¡æ•ˆçš„æ“ä½œé¡å‹")
        
        db.session.commit()
        
        logger.info(f"æ‰¹é‡æ“ä½œ {action}: {len(todos)} å€‹é …ç›®")
        return jsonify({'message': f'æˆåŠŸè™•ç† {len(todos)} å€‹é …ç›®'})
        
    except BadRequest:
        raise
    except Exception as e:
        db.session.rollback()
        logger.error(f"æ‰¹é‡æ“ä½œæ™‚ç™¼ç”ŸéŒ¯èª¤: {str(e)}")
        return jsonify({'error': 'æ‰¹é‡æ“ä½œå¤±æ•—'}), 500

@app.route('/api/categories', methods=['GET'])
def get_categories():
    """ç²å–æ‰€æœ‰åˆ†é¡"""
    categories = Category.query.all()
    return jsonify([category.to_dict() for category in categories])

@app.route('/api/stats', methods=['GET'])
def get_stats():
    """ç²å–çµ±è¨ˆè³‡è¨Š"""
    try:
        stats = {
            'total_todos': Todo.query.count(),
            'completed_todos': Todo.query.filter(Todo.completed == True).count(),
            'pending_todos': Todo.query.filter(Todo.completed == False).count(),
            'priority_stats': {
                'high': Todo.query.filter(Todo.priority == 'high').count(),
                'medium': Todo.query.filter(Todo.priority == 'medium').count(),
                'low': Todo.query.filter(Todo.priority == 'low').count()
            },
            'overdue_todos': Todo.query.filter(
                Todo.due_date < datetime.utcnow(),
                Todo.completed == False
            ).count(),
            'today_todos': Todo.query.filter(
                Todo.created_at >= datetime.utcnow().date()
            ).count()
        }
        
        return jsonify(stats)
        
    except Exception as e:
        logger.error(f"ç²å–çµ±è¨ˆè³‡è¨Šæ™‚ç™¼ç”ŸéŒ¯èª¤: {str(e)}")
        return jsonify({'error': 'ç²å–çµ±è¨ˆå¤±æ•—'}), 500

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    debug = os.environ.get('FLASK_DEBUG', 'False').lower() == 'true'
    
    app.run(host='0.0.0.0', port=port, debug=debug)
```

**ç¬¬5-6é€±ï¼šå‰å¾Œç«¯æ•´åˆèˆ‡ç‹€æ…‹ç®¡ç†**
- ğŸ”— **API ä¸²æ¥**ï¼šAxios ä½¿ç”¨ã€éŒ¯èª¤è™•ç†
- ğŸ“Š **ç‹€æ…‹ç®¡ç†**ï¼šPinia å…¨åŸŸç‹€æ…‹ç®¡ç†
- ğŸ¨ **UI çµ„ä»¶åº«**ï¼šæ•´åˆç¾æœ‰ UI æ¡†æ¶
- ğŸ’¡ **å¯¦ä½œç›®æ¨™**ï¼šå®Œæˆå…¨åŠŸèƒ½å¾…è¾¦äº‹é …æ‡‰ç”¨

**ç¬¬7-8é€±ï¼šæ¸¬è©¦èˆ‡éƒ¨ç½²**
- ğŸ§ª **å‰ç«¯æ¸¬è©¦**ï¼šVue Test Utilsã€Jest
- ğŸ” **å¾Œç«¯æ¸¬è©¦**ï¼šPytestã€æ¸¬è©¦è¦†è“‹ç‡
- ğŸš€ **éƒ¨ç½²å¯¦å‹™**ï¼šDockerã€é›²ç«¯éƒ¨ç½²
- ğŸ’¡ **å¯¦ä½œç›®æ¨™**ï¼šå®Œæ•´çš„ CI/CD æµç¨‹

### (äºŒ) å¯¦æˆ°å°ˆæ¡ˆæ¨è–¦

**ğŸ¥‰ åˆç´šå°ˆæ¡ˆï¼šå€‹äººéƒ¨è½æ ¼ç³»çµ±**
```
å°ˆæ¡ˆç›®æ¨™ï¼šå»ºç«‹å…¨ç«¯å€‹äººéƒ¨è½æ ¼å¹³å°
æŠ€è¡“æ£§ï¼šVue 3 + Flask + SQLite
åŠŸèƒ½è¦åŠƒï¼š
- âœï¸ æ–‡ç« ç™¼ä½ˆèˆ‡ç·¨è¼¯ (Markdown æ”¯æ´)
- ğŸ·ï¸ æ¨™ç±¤åˆ†é¡ç³»çµ±
- ğŸ’¬ åŸºç¤è©•è«–åŠŸèƒ½
- ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ
- ğŸ” æ–‡ç« æœå°‹åŠŸèƒ½
å­¸ç¿’æ™‚é–“ï¼š4-5 é€±
é‡é»æŠ€èƒ½ï¼šCRUD æ“ä½œã€æª”æ¡ˆä¸Šå‚³ã€æ¬Šé™æ§åˆ¶
```

**ğŸ¥ˆ ä¸­ç´šå°ˆæ¡ˆï¼šé›»å•†å¾Œå°ç®¡ç†ç³»çµ±**
```
å°ˆæ¡ˆç›®æ¨™ï¼šå»ºç«‹åŠŸèƒ½å®Œæ•´çš„é›»å•†ç®¡ç†å¹³å°
æŠ€è¡“æ£§ï¼šVue 3 + Flask + PostgreSQL + Redis
åŠŸèƒ½è¦åŠƒï¼š
- ğŸ“¦ å•†å“ç®¡ç† (æ–°å¢ã€ç·¨è¼¯ã€åº«å­˜)
- ğŸ‘¥ ç”¨æˆ¶ç®¡ç†èˆ‡æ¬Šé™æ§åˆ¶
- ğŸ“Š éŠ·å”®æ•¸æ“šåˆ†æèˆ‡åœ–è¡¨
- ğŸ“· åœ–ç‰‡ä¸Šå‚³èˆ‡è™•ç†
- ğŸ” JWT èº«ä»½é©—è­‰
- ğŸ“§ éƒµä»¶é€šçŸ¥ç³»çµ±
å­¸ç¿’æ™‚é–“ï¼š6-8 é€±
é‡é»æŠ€èƒ½ï¼šè¤‡é›œç‹€æ…‹ç®¡ç†ã€æ¬Šé™ç³»çµ±ã€æ•¸æ“šè¦–è¦ºåŒ–
```

**ğŸ¥‡ é«˜ç´šå°ˆæ¡ˆï¼šå³æ™‚å”ä½œå¹³å°**
```
å°ˆæ¡ˆç›®æ¨™ï¼šé¡ä¼¼ Notion çš„å”ä½œçŸ¥è­˜ç®¡ç†å¹³å°
æŠ€è¡“æ£§ï¼šVue 3 + Flask + WebSocket + Redis + PostgreSQL
åŠŸèƒ½è¦åŠƒï¼š
- ğŸ“ å¯Œæ–‡æœ¬ç·¨è¼¯å™¨ (æ”¯æ´å¤šç¨®å…§å®¹é¡å‹)
- ğŸ‘¥ å¤šäººå³æ™‚å”ä½œç·¨è¼¯
- ğŸ—‚ï¸ å±¤ç´šå¼é é¢çµ„ç¹”
- ğŸ”„ ç‰ˆæœ¬æ§åˆ¶èˆ‡æ­·å²è¨˜éŒ„
- ğŸ’¬ å³æ™‚è©•è«–èˆ‡è¨è«–
- ğŸ”— åˆ†äº«èˆ‡æ¬Šé™ç®¡ç†
- ğŸ“± PWA æ”¯æ´
å­¸ç¿’æ™‚é–“ï¼š8-12 é€±
é‡é»æŠ€èƒ½ï¼šå³æ™‚é€šä¿¡ã€è¤‡é›œUIçµ„ä»¶ã€æ•ˆèƒ½å„ªåŒ–
```

### (ä¸‰) é€²éšæŠ€èƒ½ç™¼å±•

**ğŸš€ å‰ç«¯é€²éšæŠ€è¡“**
- **ç‹€æ…‹ç®¡ç†é€²éš**ï¼šPinia æ¨¡å¼è¨­è¨ˆã€æ’ä»¶é–‹ç™¼
- **æ•ˆèƒ½å„ªåŒ–**ï¼šè™›æ“¬æ»¾å‹•ã€æ‡¶åŠ è¼‰ã€ä»£ç¢¼åˆ†å‰²
- **æ¸¬è©¦ç­–ç•¥**ï¼šå–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦ã€E2E æ¸¬è©¦
- **æ§‹å»ºå„ªåŒ–**ï¼šVite é…ç½®ã€æ‰“åŒ…å„ªåŒ–ã€PWA

**ğŸ å¾Œç«¯é€²éšæŠ€è¡“**
- **å¾®æœå‹™æ¶æ§‹**ï¼šæœå‹™æ‹†åˆ†ã€API Gateway
- **å¿«å–ç­–ç•¥**ï¼šRedis æ‡‰ç”¨ã€æŸ¥è©¢å„ªåŒ–
- **å®‰å…¨æ€§**ï¼šOAuth 2.0ã€HTTPSã€å®‰å…¨é ­è¨­å®š
- **ç›£æ§èˆ‡æ—¥èªŒ**ï¼šæ—¥èªŒèšåˆã€æ•ˆèƒ½ç›£æ§ã€éŒ¯èª¤è¿½è¹¤

**â˜ï¸ DevOps èˆ‡éƒ¨ç½²**
- **å®¹å™¨åŒ–**ï¼šDocker å¤šéšæ®µæ§‹å»ºã€Docker Compose
- **CI/CD**ï¼šGitHub Actionsã€è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡éƒ¨ç½²
- **é›²ç«¯æœå‹™**ï¼šAWS/Azure éƒ¨ç½²ã€CDN é…ç½®
- **ç›£æ§é‹ç¶­**ï¼šå¥åº·æª¢æŸ¥ã€è‡ªå‹•æ“´ç¸®å®¹ã€å‚™ä»½ç­–ç•¥

### (å››) å­¸ç¿’è³‡æºèˆ‡ç¤¾ç¾¤

**ğŸ“š å®˜æ–¹æ–‡æª”èˆ‡æ•™å­¸**
- **Vue.js å®˜æ–¹æ–‡æª”**ï¼šæœ€æ¬Šå¨çš„ Vue 3 å­¸ç¿’è³‡æº
- **Flask å®˜æ–¹æ–‡æª”**ï¼šå®Œæ•´çš„ Flask é–‹ç™¼æŒ‡å—
- **MDN Web Docs**ï¼šWeb æ¨™æº–æŠ€è¡“åƒè€ƒ
- **Python å®˜æ–¹æ•™å­¸**ï¼šæ·±å…¥çš„ Python èªè¨€æŒ‡å—

**ğŸ¥ å½±ç‰‡æ•™å­¸å¹³å°**
- **Vue Mastery**ï¼šVue.js å°ˆæ¥­èª²ç¨‹
- **YouTube**ï¼šå…è²»çš„æŠ€è¡“æ•™å­¸é »é“
- **Udemy/Coursera**ï¼šçµæ§‹åŒ–ç·šä¸Šèª²ç¨‹
- **æ…•èª²ç¶²/æ¥µå®¢æ™‚é–“**ï¼šä¸­æ–‡æŠ€è¡“æ•™å­¸å¹³å°

**ğŸ’¬ æŠ€è¡“ç¤¾ç¾¤èˆ‡è«–å£‡**
- **GitHub**ï¼šé–‹æºå°ˆæ¡ˆå­¸ç¿’èˆ‡è²¢ç»
- **Stack Overflow**ï¼šæŠ€è¡“å•é¡Œè§£ç­”
- **Vue.js å°ç£ç¤¾ç¾¤**ï¼šæœ¬åœ°æŠ€è¡“äº¤æµ
- **Python å°ç£ç¤¾ç¾¤**ï¼šPython é–‹ç™¼è€…èšæœƒ

### (äº”) è·æ¶¯ç™¼å±•æŒ‡å—

**ğŸ¯ å…¨ç«¯å·¥ç¨‹å¸«ç™¼å±•è·¯å¾‘**

```
åˆç´šå…¨ç«¯å·¥ç¨‹å¸« (0-2å¹´)
â”œâ”€â”€ å‰ç«¯åŸºç¤ (HTML/CSS/JS)
â”œâ”€â”€ å¾Œç«¯åŸºç¤ (Python/Flask)
â”œâ”€â”€ è³‡æ–™åº«æ“ä½œ (SQL)
â”œâ”€â”€ ç‰ˆæœ¬æ§åˆ¶ (Git)
â””â”€â”€ åŸºç¤éƒ¨ç½² (Linux/Docker)

ä¸­ç´šå…¨ç«¯å·¥ç¨‹å¸« (2-4å¹´)
â”œâ”€â”€ æ¡†æ¶ç²¾é€š (Vue/React + å¾Œç«¯æ¡†æ¶)
â”œâ”€â”€ è³‡æ–™åº«è¨­è¨ˆèˆ‡å„ªåŒ–
â”œâ”€â”€ API è¨­è¨ˆèˆ‡å¾®æœå‹™
â”œâ”€â”€ æ¸¬è©¦èˆ‡å“è³ªä¿è­‰
â”œâ”€â”€ é›²ç«¯å¹³å°ä½¿ç”¨
â””â”€â”€ DevOps åŸºç¤

é«˜ç´šå…¨ç«¯å·¥ç¨‹å¸« (4+å¹´)
â”œâ”€â”€ ç³»çµ±æ¶æ§‹è¨­è¨ˆ
â”œâ”€â”€ æ•ˆèƒ½èª¿å„ªå°ˆå®¶
â”œâ”€â”€ æŠ€è¡“é¸å‹èˆ‡è©•ä¼°
â”œâ”€â”€ åœ˜éšŠæŠ€è¡“é ˜å°
â”œâ”€â”€ ç”¢å“æ€ç¶­èˆ‡å•†æ¥­ç†è§£
â””â”€â”€ æ–°æŠ€è¡“æ¢ç´¢èˆ‡æ¡ç”¨
```

**ğŸ’¼ è·æ¥­æ©Ÿæœƒèˆ‡è–ªè³‡ç™¼å±•**

| è·ç´š | å¹´è³‡ | æŠ€èƒ½è¦æ±‚ | è–ªè³‡ç¯„åœ (å°ç£) |
|------|------|----------|----------------|
| åˆç´šå·¥ç¨‹å¸« | 0-2å¹´ | åŸºç¤æŠ€è¡“æ£§ | 40-70è¬ |
| ä¸­ç´šå·¥ç¨‹å¸« | 2-4å¹´ | ç¨ç«‹é–‹ç™¼èƒ½åŠ› | 70-120è¬ |
| é«˜ç´šå·¥ç¨‹å¸« | 4-7å¹´ | æŠ€è¡“æ·±åº¦èˆ‡å»£åº¦ | 120-200è¬ |
| æŠ€è¡“ä¸»ç®¡ | 7+å¹´ | åœ˜éšŠé ˜å° | 200è¬ä»¥ä¸Š |

**ğŸš€ æŒçºŒå­¸ç¿’å»ºè­°**

1. **æŠ€è¡“æ·±åº¦ vs å»£åº¦å¹³è¡¡**
   - é¸æ“‡ 1-2 å€‹æŠ€è¡“æ£§æ·±å…¥å°ˆç²¾
   - ä¿æŒå°æ–°æŠ€è¡“çš„æ•æ„Ÿåº¦å’Œå­¸ç¿’èƒ½åŠ›
   - å®šæœŸåƒèˆ‡æŠ€è¡“ç¤¾ç¾¤å’Œæœƒè­°

2. **å¯¦ä½œèˆ‡ç†è«–ä¸¦é‡**
   - æ¯æœˆè‡³å°‘å®Œæˆä¸€å€‹å°å°ˆæ¡ˆ
   - é–±è®€å„ªç§€é–‹æºå°ˆæ¡ˆçš„ç¨‹å¼ç¢¼
   - æ’°å¯«æŠ€è¡“éƒ¨è½æ ¼åˆ†äº«å­¸ç¿’å¿ƒå¾—

3. **è»ŸæŠ€èƒ½ç™¼å±•**
   - æºé€šå”ä½œèƒ½åŠ›
   - å•é¡Œåˆ†æèˆ‡è§£æ±ºèƒ½åŠ›
   - å°ˆæ¡ˆç®¡ç†èˆ‡æ™‚é–“è¦åŠƒ

### (å…­) å­¸ç¿’æˆæ•ˆæª¢æ ¸

**ğŸ“‹ éšæ®µæ€§æª¢æ ¸æŒ‡æ¨™**

**Vue.js æŒæ¡åº¦æª¢æ ¸**
- [ ] èƒ½å¤ å»ºç«‹éŸ¿æ‡‰å¼å–®é æ‡‰ç”¨
- [ ] ç†Ÿç·´ä½¿ç”¨ Composition API
- [ ] ç†è§£ä¸¦å¯¦ä½œçµ„ä»¶é€šä¿¡
- [ ] èƒ½å¤ é€²è¡Œç‹€æ…‹ç®¡ç† (Pinia)
- [ ] å…·å‚™æ¸¬è©¦èˆ‡é™¤éŒ¯èƒ½åŠ›

**Flask é–‹ç™¼èƒ½åŠ›æª¢æ ¸**
- [ ] èƒ½å¤ è¨­è¨ˆ RESTful API
- [ ] ç†Ÿç·´ä½¿ç”¨ ORM é€²è¡Œè³‡æ–™åº«æ“ä½œ
- [ ] å¯¦ä½œèº«ä»½é©—è­‰èˆ‡æˆæ¬Š
- [ ] å…·å‚™éŒ¯èª¤è™•ç†èˆ‡æ—¥èªŒè¨˜éŒ„èƒ½åŠ›
- [ ] èƒ½å¤ ç·¨å¯«å–®å…ƒæ¸¬è©¦

**å…¨ç«¯æ•´åˆèƒ½åŠ›æª¢æ ¸**
- [ ] èƒ½å¤ å®Œæˆå‰å¾Œç«¯æ•¸æ“šæµè¨­è¨ˆ
- [ ] å…·å‚™ API è¨­è¨ˆèˆ‡æ–‡æª”æ’°å¯«èƒ½åŠ›
- [ ] ç†è§£ä¸¦å¯¦ä½œå®‰å…¨æ€§æœ€ä½³å¯¦è¸
- [ ] èƒ½å¤ é€²è¡Œæ•ˆèƒ½å„ªåŒ–
- [ ] å…·å‚™éƒ¨ç½²èˆ‡ç¶­è­·èƒ½åŠ›

**å°ˆæ¥­æŠ€èƒ½æª¢æ ¸**
- [ ] èƒ½å¤ ç¨ç«‹è¦åŠƒèˆ‡åŸ·è¡Œå®Œæ•´å°ˆæ¡ˆ
- [ ] å…·å‚™ç¨‹å¼ç¢¼å“è³ªç®¡æ§èƒ½åŠ›
- [ ] èƒ½å¤ é€²è¡ŒæŠ€è¡“é¸å‹èˆ‡æ¶æ§‹è¨­è¨ˆ
- [ ] å…·å‚™åœ˜éšŠå”ä½œèˆ‡æºé€šèƒ½åŠ›
- [ ] ä¿æŒæŒçºŒå­¸ç¿’èˆ‡æŠ€è¡“æ›´æ–°

è¨˜ä½ï¼Œæˆç‚ºå„ªç§€çš„å…¨ç«¯å·¥ç¨‹å¸«éœ€è¦**æŒçºŒå¯¦ä½œ**å’Œ**æ·±åº¦æ€è€ƒ**ï¼ğŸš€ æ¯å€‹å°ˆæ¡ˆéƒ½æ˜¯æˆé•·çš„æ©Ÿæœƒï¼Œæ¯å€‹æŒ‘æˆ°éƒ½æ˜¯æå‡çš„å¥‘æ©Ÿã€‚ä¿æŒå¥½å¥‡å¿ƒï¼Œå‹‡æ–¼å˜—è©¦æ–°æŠ€è¡“ï¼Œä¸¦ä¸”ä¸æ–·åæ€å’Œæ”¹é€²è‡ªå·±çš„ä»£ç¢¼å“è³ªã€‚

é€šéé€™å€‹å®Œæ•´çš„ç¬¬ä¸‰éšæ®µé€²éšæ‡‰ç”¨æŒ‡å—ï¼Œæ‚¨å·²ç¶“æŒæ¡äº†å¾å‰ç«¯ Vue.js é–‹ç™¼åˆ°å¾Œç«¯ Flask è¨­è¨ˆï¼Œå†åˆ°å‰å¾Œç«¯æ•´åˆçš„å®Œæ•´æŠ€è¡“æ£§ã€‚é€™äº›çŸ¥è­˜å°‡å¹«åŠ©æ‚¨å»ºç«‹åŠŸèƒ½å®Œæ•´ã€æ•ˆèƒ½å„ªè‰¯ã€å®‰å…¨å¯é çš„ç¾ä»£ Web æ‡‰ç”¨ç¨‹å¼ã€‚

æŠ€è¡“å­¸ç¿’æ˜¯ä¸€å€‹æŒçºŒçš„éç¨‹ï¼Œå»ºè­°åœ¨å¯¦éš›å°ˆæ¡ˆä¸­æ‡‰ç”¨é€™äº›çŸ¥è­˜ï¼Œä¸¦æ ¹æ“šå°ˆæ¡ˆéœ€æ±‚é¸æ“‡åˆé©çš„æŠ€è¡“æ–¹æ¡ˆã€‚åŒæ™‚ï¼Œä¿æŒå°æ–°æŠ€è¡“çš„é—œæ³¨ï¼Œä¸æ–·æ›´æ–°å’Œå®Œå–„æ‚¨çš„æŠ€èƒ½æ¨¹ã€‚
